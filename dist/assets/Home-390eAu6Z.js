import{j as r,s as T,a as _,B as $,k as V,c as W,r as j,L as E}from"./index-S7cYxM_B.js";import{c as q}from"./createSvgIcon-CautBTPO.js";import{B as I}from"./Button-C3PzBk_K.js";import{L as w}from"./LinearLabel-CJr6g5Fp.js";import{P as G}from"./PieChart-CEa8j8Cj.js";import{B as k}from"./Box-CTT52tme.js";import{A as X}from"./Avatar-BE4EWBTs.js";import"./createSimplePaletteValueFilter-9aNoSHvX.js";import"./CircularProgress-E9bXQN4n.js";import"./ButtonBase-CphgOx8x.js";import"./index-BANJVMaf.js";import"./index-Chjiymov.js";import"./LinearProgress-B8ij4fEW.js";import"./index-C_roNAU8.js";import"./useThemeProps-lUfdJRw-.js";import"./useSlot-DZ8_FYpd.js";import"./Portal-ClC-8bNA.js";import"./useSlotProps-BfLjIFLB.js";import"./Typography-CmGfFPnw.js";import"./index-BIhq7hj2.js";import"./Popper-DY0JmY0I.js";const Y=q(r.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment"),Z=async()=>{const{user:e}=T.getState().auth;try{const t=await _.get(`${$}/api/v1/solution/get/solutions?userId=${e._id}`);T.dispatch(V(t.data))}catch(t){console.log(t)}finally{}},J=()=>{const{solutions:e}=W(t=>t.solution);return j.useEffect(()=>{Z()},[]),r.jsx("section",{className:" bg-white mt-9 shadow-lg rounded-lg gap-6   flex flex-col ",children:r.jsxs("div",{className:"relative flex flex-col  w-full h-full custom-scrollbar overflow-scroll    bg-white shadow-md  bg-clip-border",children:[r.jsxs("table",{className:"w-full text-left table-auto min-w-max",children:[r.jsx("thead",{className:"bg-support rounded-t-lg",children:r.jsxs("tr",{children:[r.jsx("td",{className:"p-4 border-b border-slate-200 ",children:r.jsx("p",{className:"text-sm font-normal leading-none ",children:"Quiz Name"})}),r.jsx("td",{className:"p-4 border-b border-slate-200 ",children:r.jsx("p",{className:"text-sm font-normal leading-none ",children:"Submitted At"})}),r.jsx("td",{className:"p-4 border-b border-slate-200 ",children:r.jsx("p",{className:"text-sm font-normal leading-none ",children:"Preview"})})]})}),r.jsx("tbody",{children:e==null?void 0:e.map(t=>r.jsxs("tr",{className:"hover bg-primary border-b border-slate-200",children:[r.jsx("td",{className:"p-4 py-5",children:r.jsx("p",{className:"block font-semibold text-sm  dark:text-white text-slate-800",children:t.quizId.title})}),r.jsx("td",{className:"p-4 py-5",children:r.jsx("p",{className:"block font-semibold text-sm  dark:text-white text-slate-800",children:Q(t.updatedAt)})}),r.jsx("td",{className:"p-4 py-5",children:r.jsx(E,{to:`/user/preview/${t._id}`,className:"block font-semibold text-sm  dark:text-white text-slate-800",children:r.jsx(Y,{})})})]},t._id))})]}),((e==null?void 0:e.length)==0||e==null)&&r.jsx("div",{className:"py-5",children:r.jsx(E,{to:"/user/practice",className:"text-sm text-gray-600 p-5 my-5",children:"Go to practice section"})})]})})};function Q(e){const t=new Date(e),a=t.getDate(),s=t.toLocaleString("default",{month:"short"}).toUpperCase(),n=t.getFullYear(),l=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${a} ${s} ${n}, ${l}:${i}`}const y=e=>e===1?"/icons/medal-first.png":e===2?"/icons/medal-second.png":e===3?"/icons/medal-third.png":null,A={university:[{rank:1,name:"Aryan Bhandari",score:980,university:"UPES"},{rank:2,name:"Pranjal Rawat",score:950,university:"UPES"},{rank:3,name:"Tanvi Sharma",score:920,university:"UPES"}],global:[{rank:1,name:"Ritika Panwar",score:1e3,university:"DU"},{rank:2,name:"Aditya Mehra",score:985,university:"IIT Delhi"},{rank:3,name:"Aryan Bhandari",score:980,university:"UPES"}]},C={name:"Aryan Bhandari",university:"UPES"},K="UPES";function ee({}){const[e,t]=j.useState("university"),a=(A==null?void 0:A[e])||[],s=a.find(n=>n.name===C.name);return s!=null&&s.rank,r.jsx("div",{className:"flex-[.7] bg-primary dark:bg-support rounded-md shadow-lg p-4 flex flex-col min-h-[400px]",children:r.jsxs("div",{className:"rounded-lg flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 rounded-md bg-support dark:bg-primary   shadow-sm",children:[r.jsx("div",{className:"text-sm font-medium opacity-80",children:"Institution"}),r.jsx("div",{className:"text-sm font-semibold",children:K})]}),r.jsxs("div",{className:"flex h-[50px] rounded-lg text-white gap-3 bg-support dark:bg-primary items-center px-4",children:[r.jsx(I,{variant:e==="university"?"contained":"text",onClick:()=>t("university"),sx:{fontSize:12,borderRadius:20,textTransform:"none",color:e==="university"?"#fff":"#ccc"},children:"University"}),r.jsx(I,{variant:e==="global"?"contained":"text",onClick:()=>t("global"),sx:{fontSize:12,borderRadius:20,textTransform:"none",color:e==="global"?"#fff":"#ccc"},children:"Global"})]}),r.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[a.map((n,l)=>r.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-support dark:bg-primary  rounded-md",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[y(n.rank)&&r.jsx("img",{className:"h-7",src:y(n.rank),alt:`rank-${n.rank}`}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:n.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:n.university})]})]}),r.jsxs("span",{className:"text-sm font-bold text-[#1976d2] dark:text-blue-300",children:[n.score," pts"]})]},l)),s&&r.jsxs("div",{className:"p-4 bg-support dark:bg-primary rounded-md mt-4 shadow",children:[r.jsx("h1",{className:"text-md font-bold text-gray-800 dark:text-white mb-2",children:"Your Rank"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[y(s.rank)&&r.jsx("img",{className:"h-7",src:y(s.rank),alt:""}),"#",s.rank,r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:C.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:C.university})]})]}),r.jsxs("small",{className:"text-[#1976d2] text-md font-bold  dark:text-blue-300",children:[s.score," pts"]})]})]})]})]})})}const te={margin:{right:5,top:-4},slotProps:{legend:{hidden:!0}}};function re({solutions:e}){var l,i,o,c,f,d;const t=((l=e==null?void 0:e.Aptitude)==null?void 0:l.attempted)||0,a=((i=e==null?void 0:e.Core)==null?void 0:i.attempted)||0,s=((o=e==null?void 0:e.Miscellaneous)==null?void 0:o.attempted)||0,n=t===0&&a===0&&s===0;return r.jsx("div",{className:"flex relative flex-col items-center justify-center flex-[0.5]  p-6 rounded-md shadow-lg bg-primary dark:bg-support bg-opacity-60 backdrop-blur-lg",children:n?r.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 font-semibold",children:"Not enough data to display progress"}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col items-center w-full  rounded-xl ",children:[r.jsx("div",{className:"flex gap-2 justify-evenly w-full mb-3",children:[{label:"Aptitude",color:"#6366f1",value:t},{label:"Core",color:"#14b8a6",value:a},{label:"Miscellaneous",color:"#f97316",value:s}].map(h=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.color}}),r.jsxs("span",{className:"text-gray-700 dark:text-gray-200 font-medium",children:[h.label,": ",h.value]})]},h.label))}),r.jsx(G,{width:300,height:240,...te,series:[{data:[{value:t,color:"#6366f1",label:"Aptitude"},{value:a,color:"#14b8a6",label:"Core"},{value:s,color:"#f97316",label:"Miscellaneous"}],innerRadius:24,outerRadius:100,paddingAngle:0,cornerRadius:5,startAngle:-45,endAngle:360,cx:150,cy:110,highlightScope:{faded:"global",highlighted:"item"},faded:{additionalRadius:-5,color:"gray"},arcLabelMinAngle:15}]})]}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("h1",{children:"Average Marks"}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{className:"text-xs font-medium text-gray-800 dark:text-gray-300",children:"Apti"}),r.jsx(k,{width:"100%",children:r.jsx(w,{value:(c=e==null?void 0:e.Aptitude)==null?void 0:c.average})})]}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-800 dark:text-gray-300",children:"Core"}),r.jsx(k,{width:"100%",children:r.jsx(w,{value:(f=e==null?void 0:e.Core)==null?void 0:f.average})})]}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-800 dark:text-gray-300",children:"Misc"}),r.jsx(k,{width:"100%",children:r.jsx(w,{value:(d=e==null?void 0:e.Miscellaneous)==null?void 0:d.average})})]})]})]})})}/*! Fast Average Color | Â© 2025 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function ae(e){var t=e.toString(16);return t.length===1?"0"+t:t}function R(e){return"#"+e.map(ae).join("")}function se(e){var t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128}function ne(e){return e?ie(e)?e:[e]:[]}function ie(e){return Array.isArray(e[0])}function S(e,t,a){for(var s=0;s<a.length;s++)if(le(e,t,a[s]))return!0;return!1}function le(e,t,a){switch(a.length){case 3:if(oe(e,t,a))return!0;break;case 4:if(ce(e,t,a))return!0;break;case 5:if(de(e,t,a))return!0;break;default:return!1}}function oe(e,t,a){return e[t+3]!==255||e[t]===a[0]&&e[t+1]===a[1]&&e[t+2]===a[2]}function ce(e,t,a){return e[t+3]&&a[3]?e[t]===a[0]&&e[t+1]===a[1]&&e[t+2]===a[2]&&e[t+3]===a[3]:e[t+3]===a[3]}function N(e,t,a){return e>=t-a&&e<=t+a}function de(e,t,a){var s=a[0],n=a[1],l=a[2],i=a[3],o=a[4],c=e[t+3],f=N(c,i,o);return i?!!(!c&&f||N(e[t],s,o)&&N(e[t+1],n,o)&&N(e[t+2],l,o)&&f):f}var fe=24;function he(e,t,a){for(var s={},n=a.dominantDivider||fe,l=a.ignoredColor,i=a.step,o=[0,0,0,0,0],c=0;c<t;c+=i){var f=e[c],d=e[c+1],h=e[c+2],u=e[c+3];if(!(l&&S(e,c,l))){var m=Math.round(f/n)+","+Math.round(d/n)+","+Math.round(h/n);s[m]?s[m]=[s[m][0]+f*u,s[m][1]+d*u,s[m][2]+h*u,s[m][3]+u,s[m][4]+1]:s[m]=[f*u,d*u,h*u,u,1],o[4]<s[m][4]&&(o=s[m])}}var v=o[0],F=o[1],U=o[2],g=o[3],z=o[4];return g?[Math.round(v/g),Math.round(F/g),Math.round(U/g),Math.round(g/z)]:a.defaultColor}function me(e,t,a){for(var s=0,n=0,l=0,i=0,o=0,c=a.ignoredColor,f=a.step,d=0;d<t;d+=f){var h=e[d+3],u=e[d]*h,m=e[d+1]*h,v=e[d+2]*h;c&&S(e,d,c)||(s+=u,n+=m,l+=v,i+=h,o++)}return i?[Math.round(s/i),Math.round(n/i),Math.round(l/i),Math.round(i/o)]:a.defaultColor}function ue(e,t,a){for(var s=0,n=0,l=0,i=0,o=0,c=a.ignoredColor,f=a.step,d=0;d<t;d+=f){var h=e[d],u=e[d+1],m=e[d+2],v=e[d+3];c&&S(e,d,c)||(s+=h*h*v,n+=u*u*v,l+=m*m*v,i+=v,o++)}return i?[Math.round(Math.sqrt(s/i)),Math.round(Math.sqrt(n/i)),Math.round(Math.sqrt(l/i)),Math.round(i/o)]:a.defaultColor}function H(e){return b(e,"defaultColor",[0,0,0,0])}function b(e,t,a){return e[t]===void 0?a:e[t]}var L=10,M=100;function xe(e){return e.search(/\.svg(\?|$)/i)!==-1}function ve(e){if(D(e)){var t=e.naturalWidth,a=e.naturalHeight;return!e.naturalWidth&&xe(e.src)&&(t=a=M),{width:t,height:a}}return pe(e)?{width:e.videoWidth,height:e.videoHeight}:B(e)?{width:e.codedWidth,height:e.codedHeight}:{width:e.width,height:e.height}}function P(e){return be(e)?"canvas":ge(e)?"offscreencanvas":B(e)?"videoframe":je(e)?"imagebitmap":e.src}function D(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement}var O=typeof OffscreenCanvas<"u";function ge(e){return O&&e instanceof OffscreenCanvas}function pe(e){return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement}function B(e){return typeof VideoFrame<"u"&&e instanceof VideoFrame}function be(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement}function je(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function ye(e,t){var a=b(t,"left",0),s=b(t,"top",0),n=b(t,"width",e.width),l=b(t,"height",e.height),i=n,o=l;if(t.mode==="precision")return{srcLeft:a,srcTop:s,srcWidth:n,srcHeight:l,destWidth:i,destHeight:o};var c;return n>l?(c=n/l,i=M,o=Math.round(i/c)):(c=l/n,o=M,i=Math.round(o/c)),(i>n||o>l||i<L||o<L)&&(i=n,o=l),{srcLeft:a,srcTop:s,srcWidth:n,srcHeight:l,destWidth:i,destHeight:o}}var Ne=typeof window>"u";function we(){return Ne?O?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var ke="FastAverageColor: ";function x(e){return Error(ke+e)}function p(e,t){t||console.error(e)}var Ae=function(){function e(){this.canvas=null,this.ctx=null}return e.prototype.getColorAsync=function(t,a){if(!t)return Promise.reject(x("call .getColorAsync() without resource"));if(typeof t=="string"){if(typeof Image>"u")return Promise.reject(x("resource as string is not supported in this environment"));var s=new Image;return s.crossOrigin=a&&a.crossOrigin||"",s.src=t,this.bindImageEvents(s,a)}else{if(D(t)&&!t.complete)return this.bindImageEvents(t,a);var n=this.getColor(t,a);return n.error?Promise.reject(n.error):Promise.resolve(n)}},e.prototype.getColor=function(t,a){a=a||{};var s=H(a);if(!t){var n=x("call .getColor() without resource");return p(n,a.silent),this.prepareResult(s,n)}var l=ve(t),i=ye(l,a);if(!i.srcWidth||!i.srcHeight||!i.destWidth||!i.destHeight){var n=x('incorrect sizes for resource "'.concat(P(t),'"'));return p(n,a.silent),this.prepareResult(s,n)}if(!this.canvas&&(this.canvas=we(),!this.canvas)){var n=x("OffscreenCanvas is not supported in this browser");return p(n,a.silent),this.prepareResult(s,n)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var n=x("Canvas Context 2D is not supported in this browser");return p(n,a.silent),this.prepareResult(s)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=i.destWidth,this.canvas.height=i.destHeight;try{this.ctx.clearRect(0,0,i.destWidth,i.destHeight),this.ctx.drawImage(t,i.srcLeft,i.srcTop,i.srcWidth,i.srcHeight,0,0,i.destWidth,i.destHeight);var o=this.ctx.getImageData(0,0,i.destWidth,i.destHeight).data;return this.prepareResult(this.getColorFromArray4(o,a))}catch(c){var n=x("security error (CORS) for resource ".concat(P(t),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return p(n,a.silent),a.silent||console.error(c),this.prepareResult(s,n)}},e.prototype.getColorFromArray4=function(t,a){a=a||{};var s=4,n=t.length,l=H(a);if(n<s)return l;var i=n-n%s,o=(a.step||1)*s,c;switch(a.algorithm||"sqrt"){case"simple":c=me;break;case"sqrt":c=ue;break;case"dominant":c=he;break;default:throw x("".concat(a.algorithm," is unknown algorithm"))}return c(t,i,{defaultColor:l,ignoredColor:ne(a.ignoredColor),step:o,dominantDivider:a.dominantDivider})},e.prototype.prepareResult=function(t,a){var s=t.slice(0,3),n=[t[0],t[1],t[2],t[3]/255],l=se(t);return{value:[t[0],t[1],t[2],t[3]],rgb:"rgb("+s.join(",")+")",rgba:"rgba("+n.join(",")+")",hex:R(s),hexa:R(t),isDark:l,isLight:!l,error:a}},e.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},e.prototype.bindImageEvents=function(t,a){var s=this;return new Promise(function(n,l){var i=function(){f();var d=s.getColor(t,a);d.error?l(d.error):n(d)},o=function(){f(),l(x('Error loading image "'.concat(t.src,'"')))},c=function(){f(),l(x('Image "'.concat(t.src,'" loading aborted')))},f=function(){t.removeEventListener("load",i),t.removeEventListener("error",o),t.removeEventListener("abort",c)};t.addEventListener("load",i),t.addEventListener("error",o),t.addEventListener("abort",c)})},e}();function Ce({user:e}){const t=j.useRef(null),[a,s]=j.useState("#fff6e9");return j.useEffect(()=>{if(!(e!=null&&e.avatar))return;const n=new Ae,l=t.current,i=()=>{n.getColorAsync(l).then(o=>s(o.hex)).catch(o=>{console.error("Color extraction failed:",o),s("#fff6e9")})};return l!=null&&l.complete?i():l.onload=i,()=>{n.destroy()}},[e]),r.jsxs("div",{className:"relative flex flex-[.5] bg-primary dark:bg-support shadow-md p-6 rounded-md  flex-col items-center",children:[r.jsx("img",{ref:t,src:e==null?void 0:e.avatar,alt:"avatar",crossOrigin:"anonymous",style:{display:"none"}}),r.jsxs("div",{className:"h-full items-end w-full",children:[r.jsx("div",{className:"relative h-[93px] flex justify-center items-end w-full rounded-md bg-[#fff6e9]",children:r.jsx(X,{sx:{position:"absolute",bottom:"-30px"},src:`${e.avatar}`,className:"mb-4 border",style:{width:"80px",height:"80px"}})}),r.jsxs("div",{className:"text-center mt-[20px]",children:[r.jsx("p",{className:"text-xl font-bold",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.email})]}),r.jsxs("div",{className:"mt-7 flex flex-col gap-1 items-start w-full text-sm",children:[r.jsxs("small",{children:[r.jsx("strong",{children:"Semester:"})," ",e.semester||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Program:"})," ",e.program||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"University:"})," ",e.university||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Specialisation:"})," ",e.specialisation||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Joined:"})," ",new Date(e.createdAt).toDateString()]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Status:"})," Active"]})]})]}),r.jsx(E,{to:`profile/${e._id}`,children:r.jsx(I,{variant:"contained",color:"primary",sx:{fontSize:9},children:"Edit Profile"})})]})}function Xe(){const{user:e}=W(t=>t.auth);return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"gap-6 dark:text-gray-50 text-gray-700 flex flex-col lg:flex-row ",children:[r.jsx(Ce,{user:e}),r.jsx(re,{solutions:e.solutions}),r.jsx(ee,{user:e,userUniversity:e.university})]}),r.jsx(J,{})]})}export{Xe as default};
