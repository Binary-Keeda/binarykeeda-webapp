const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddSectionModal-mM7ROjHy.js","assets/index-ByscKdnN.js","assets/index-DPVRx9am.css","assets/IconButton-DUhFuVRf.js","assets/CircularProgress-CGXYK_QQ.js","assets/Close-TIsiLFFR.js","assets/createSvgIcon-CV4kloV_.js"])))=>i.map(i=>d[i]);
import{j as e,r as u,a as H,B as _,e as $e,q as Fe,_ as Be}from"./index-ByscKdnN.js";import{P as oe,u as qe,G as De}from"./Menu-DCcQImx2.js";import{T as He}from"./Typography-BNJ9LGKq.js";import{T as X,S as ye,F as _e}from"./TextField-BS-r-ETL.js";import{b as Z,g as K,c as J,d as A,e as ae,f as T,h as Y,m as G,n as ce,l as de,k as U,t as We,a as ne,w as je,i as ue,x as Ue,y as Qe,C as Ge}from"./CircularProgress-CGXYK_QQ.js";import{S as Ve,T as Ce}from"./Tooltip-D8uAUcRi.js";import{c as W}from"./createSvgIcon-CV4kloV_.js";import{u as E,g as Xe,b as se,e as pe,a as Ze}from"./Portal-DvzNmnWg.js";import{c as Ke}from"./Modal-0XQZg_ib.js";import{B as Q}from"./Button-DSPqBU7M.js";import{A as re}from"./Add-B5oXbXUs.js";import{d as Je}from"./index-g0kGOWjn.js";import{M as D}from"./MenuItem-CSnXA4_G.js";import{C as Ye}from"./Close-C4iNoN7A.js";import{I as ie}from"./IconButton-DUhFuVRf.js";import{C as et}from"./Close-TIsiLFFR.js";import{A as me,a as fe,b as xe}from"./AccordionSummary-BtttY2OH.js";import"./index-DrY_JyAe.js";import"./index-I-2B8CDE.js";import"./Popper-CVlzXm99.js";import"./dividerClasses-DVqtj1cb.js";function tt(t){return K("MuiAlert",t)}const ge=Z("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),st=W(e.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),nt=W(e.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ot=W(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),at=W(e.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),rt=t=>{const{variant:n,color:o,severity:s,classes:d}=t,f={root:["root",`color${T(o||s)}`,`${n}${T(o||s)}`,`${n}`],icon:["icon"],message:["message"],action:["action"]};return Y(f,tt,d)},it=A(oe,{name:"MuiAlert",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,n[o.variant],n[`${o.variant}${T(o.color||o.severity)}`]]}})(G(({theme:t})=>{const n=t.palette.mode==="light"?ce:de,o=t.palette.mode==="light"?de:ce;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(U(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:n(t.palette[s].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${s}StandardBg`]:o(t.palette[s].light,.9),[`& .${ge.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(U(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:n(t.palette[s].light,.6),border:`1px solid ${(t.vars||t).palette[s].light}`,[`& .${ge.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(U(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${s}FilledColor`],backgroundColor:t.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[s].dark:t.palette[s].main,color:t.palette.getContrastText(t.palette[s].main)}}}))]}})),lt=A("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,n)=>n.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),ct=A("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,n)=>n.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),dt=A("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,n)=>n.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),he={success:e.jsx(st,{fontSize:"inherit"}),warning:e.jsx(nt,{fontSize:"inherit"}),error:e.jsx(ot,{fontSize:"inherit"}),info:e.jsx(at,{fontSize:"inherit"})},Se=u.forwardRef(function(n,o){const s=J({props:n,name:"MuiAlert"}),{action:d,children:f,className:g,closeText:h="Close",color:p,components:x={},componentsProps:l={},icon:m,iconMapping:S=he,onClose:k,role:c="alert",severity:b="success",slotProps:w={},slots:v={},variant:j="standard",...a}=s,C={...s,color:p,severity:b,variant:j,colorSeverity:p||b},r=rt(C),i={slots:{closeButton:x.CloseButton,closeIcon:x.CloseIcon,...v},slotProps:{...l,...w}},[y,I]=E("root",{ref:o,shouldForwardComponentProp:!0,className:ae(r.root,g),elementType:it,externalForwardedProps:{...i,...a},ownerState:C,additionalProps:{role:c,elevation:0}}),[N,O]=E("icon",{className:r.icon,elementType:lt,externalForwardedProps:i,ownerState:C}),[F,B]=E("message",{className:r.message,elementType:ct,externalForwardedProps:i,ownerState:C}),[z,$]=E("action",{className:r.action,elementType:dt,externalForwardedProps:i,ownerState:C}),[R,q]=E("closeButton",{elementType:ie,externalForwardedProps:i,ownerState:C}),[ee,te]=E("closeIcon",{elementType:Ye,externalForwardedProps:i,ownerState:C});return e.jsxs(y,{...I,children:[m!==!1?e.jsx(N,{...O,children:m||S[b]||he[b]}):null,e.jsx(F,{...B,children:f}),d!=null?e.jsx(z,{...$,children:d}):null,d==null&&k?e.jsx(z,{...$,children:e.jsx(R,{size:"small","aria-label":h,title:h,color:"inherit",onClick:k,...q,children:e.jsx(ee,{fontSize:"small",...te})})}):null]})});function ve(t){return t.substring(2).toLowerCase()}function ut(t,n){return n.documentElement.clientWidth<t.clientX||n.documentElement.clientHeight<t.clientY}function pt(t){const{children:n,disableReactTree:o=!1,mouseEvent:s="onClick",onClickAway:d,touchEvent:f="onTouchEnd"}=t,g=u.useRef(!1),h=u.useRef(null),p=u.useRef(!1),x=u.useRef(!1);u.useEffect(()=>(setTimeout(()=>{p.current=!0},0),()=>{p.current=!1}),[]);const l=We(Xe(n),h),m=ne(c=>{const b=x.current;x.current=!1;const w=se(h.current);if(!p.current||!h.current||"clientX"in c&&ut(c,w))return;if(g.current){g.current=!1;return}let v;c.composedPath?v=c.composedPath().includes(h.current):v=!w.documentElement.contains(c.target)||h.current.contains(c.target),!v&&(o||!b)&&d(c)}),S=c=>b=>{x.current=!0;const w=n.props[c];w&&w(b)},k={ref:l};return f!==!1&&(k[f]=S(f)),u.useEffect(()=>{if(f!==!1){const c=ve(f),b=se(h.current),w=()=>{g.current=!0};return b.addEventListener(c,m),b.addEventListener("touchmove",w),()=>{b.removeEventListener(c,m),b.removeEventListener("touchmove",w)}}},[m,f]),s!==!1&&(k[s]=S(s)),u.useEffect(()=>{if(s!==!1){const c=ve(s),b=se(h.current);return b.addEventListener(c,m),()=>{b.removeEventListener(c,m)}}},[m,s]),u.cloneElement(n,k)}const mt=W(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),ft=W(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),xt=A("span",{shouldForwardProp:je})({position:"relative",display:"flex"}),gt=A(mt)({transform:"scale(1)"}),ht=A(ft)(G(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function we(t){const{checked:n=!1,classes:o={},fontSize:s}=t,d={...t,checked:n};return e.jsxs(xt,{className:o.root,ownerState:d,children:[e.jsx(gt,{fontSize:s,className:o.background,ownerState:d}),e.jsx(ht,{fontSize:s,className:o.dot,ownerState:d})]})}const vt=u.createContext(void 0);function bt(){return u.useContext(vt)}function yt(t){return K("MuiRadio",t)}const be=Z("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),jt=t=>{const{classes:n,color:o,size:s}=t,d={root:["root",`color${T(o)}`,s!=="medium"&&`size${T(s)}`]};return{...n,...Y(d,yt,n)}},Ct=A(Ve,{shouldForwardProp:t=>je(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,o.size!=="medium"&&n[`size${T(o.size)}`],n[`color${T(o.color)}`]]}})(G(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${be.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:ue(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(U()).map(([n])=>({props:{color:n,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:ue(t.palette[n].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(U()).map(([n])=>({props:{color:n,disabled:!1},style:{[`&.${be.checked}`]:{color:(t.vars||t).palette[n].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function St(t,n){return typeof n=="object"&&n!==null?t===n:String(t)===String(n)}const wt=e.jsx(we,{checked:!0}),kt=e.jsx(we,{}),Nt=u.forwardRef(function(n,o){const s=J({props:n,name:"MuiRadio"}),{checked:d,checkedIcon:f=wt,color:g="primary",icon:h=kt,name:p,onChange:x,size:l="medium",className:m,disabled:S,disableRipple:k=!1,slots:c={},slotProps:b={},inputProps:w,...v}=s,j=qe();let a=S;j&&typeof a>"u"&&(a=j.disabled),a??(a=!1);const C={...s,disabled:a,disableRipple:k,color:g,size:l},r=jt(C),i=bt();let y=d;const I=Ke(x,i&&i.onChange);let N=p;i&&(typeof y>"u"&&(y=St(i.value,s.value)),typeof N>"u"&&(N=i.name));const O=b.input??w,[F,B]=E("root",{ref:o,elementType:Ct,className:ae(r.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:c,slotProps:b,...v},getSlotProps:z=>({...z,onChange:($,...R)=>{var q;(q=z.onChange)==null||q.call(z,$,...R),I($,...R)}}),ownerState:C,additionalProps:{type:"radio",icon:u.cloneElement(h,{fontSize:h.props.fontSize??l}),checkedIcon:u.cloneElement(f,{fontSize:f.props.fontSize??l}),disabled:a,name:N,checked:y,slots:c,slotProps:{input:typeof O=="function"?O(C):O}}});return e.jsx(F,{...B,classes:r})});function Pt(t={}){const{autoHideDuration:n=null,disableWindowBlurListener:o=!1,onClose:s,open:d,resumeHideDuration:f}=t,g=Ue();u.useEffect(()=>{if(!d)return;function v(j){j.defaultPrevented||j.key==="Escape"&&(s==null||s(j,"escapeKeyDown"))}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[d,s]);const h=ne((v,j)=>{s==null||s(v,j)}),p=ne(v=>{!s||v==null||g.start(v,()=>{h(null,"timeout")})});u.useEffect(()=>(d&&p(n),g.clear),[d,n,p,g]);const x=v=>{s==null||s(v,"clickaway")},l=g.clear,m=u.useCallback(()=>{n!=null&&p(f??n*.5)},[n,f,p]),S=v=>j=>{const a=v.onBlur;a==null||a(j),m()},k=v=>j=>{const a=v.onFocus;a==null||a(j),l()},c=v=>j=>{const a=v.onMouseEnter;a==null||a(j),l()},b=v=>j=>{const a=v.onMouseLeave;a==null||a(j),m()};return u.useEffect(()=>{if(!o&&d)return window.addEventListener("focus",m),window.addEventListener("blur",l),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",l)}},[o,d,m,l]),{getRootProps:(v={})=>{const j={...pe(t),...pe(v)};return{role:"presentation",...v,...j,onBlur:S(j),onFocus:k(j),onMouseEnter:c(j),onMouseLeave:b(j)}},onClickAway:x}}function At(t){return K("MuiSnackbarContent",t)}Z("MuiSnackbarContent",["root","message","action"]);const Rt=t=>{const{classes:n}=t;return Y({root:["root"],action:["action"],message:["message"]},At,n)},Et=A(oe,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,n)=>n.root})(G(({theme:t})=>{const n=t.palette.mode==="light"?.8:.98,o=Qe(t.palette.background.default,n);return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(o),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:o,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Tt=A("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,n)=>n.message})({padding:"8px 0"}),It=A("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,n)=>n.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Mt=u.forwardRef(function(n,o){const s=J({props:n,name:"MuiSnackbarContent"}),{action:d,className:f,message:g,role:h="alert",...p}=s,x=s,l=Rt(x);return e.jsxs(Et,{role:h,square:!0,elevation:6,className:ae(l.root,f),ownerState:x,ref:o,...p,children:[e.jsx(Tt,{className:l.message,ownerState:x,children:g}),d?e.jsx(It,{className:l.action,ownerState:x,children:d}):null]})});function zt(t){return K("MuiSnackbar",t)}Z("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Ot=t=>{const{classes:n,anchorOrigin:o}=t,s={root:["root",`anchorOrigin${T(o.vertical)}${T(o.horizontal)}`]};return Y(s,zt,n)},Lt=A("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,n[`anchorOrigin${T(o.anchorOrigin.vertical)}${T(o.anchorOrigin.horizontal)}`]]}})(G(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:n})=>n.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:n})=>n.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),ke=u.forwardRef(function(n,o){const s=J({props:n,name:"MuiSnackbar"}),d=Ze(),f={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{action:g,anchorOrigin:{vertical:h,horizontal:p}={vertical:"bottom",horizontal:"left"},autoHideDuration:x=null,children:l,className:m,ClickAwayListenerProps:S,ContentProps:k,disableWindowBlurListener:c=!1,message:b,onBlur:w,onClose:v,onFocus:j,onMouseEnter:a,onMouseLeave:C,open:r,resumeHideDuration:i,slots:y={},slotProps:I={},TransitionComponent:N,transitionDuration:O=f,TransitionProps:{onEnter:F,onExited:B,...z}={},...$}=s,R={...s,anchorOrigin:{vertical:h,horizontal:p},autoHideDuration:x,disableWindowBlurListener:c,TransitionComponent:N,transitionDuration:O},q=Ot(R),{getRootProps:ee,onClickAway:te}=Pt({...R}),[Ne,le]=u.useState(!0),Pe=P=>{le(!0),B&&B(P)},Ae=(P,M)=>{le(!1),F&&F(P,M)},V={slots:{transition:N,...y},slotProps:{content:k,clickAwayListener:S,transition:z,...I}},[Re,Ee]=E("root",{ref:o,className:[q.root,m],elementType:Lt,getSlotProps:ee,externalForwardedProps:{...V,...$},ownerState:R}),[Te,Ie]=E("clickAwayListener",{elementType:pt,externalForwardedProps:V,getSlotProps:P=>({onClickAway:(...M)=>{var L;(L=P.onClickAway)==null||L.call(P,...M),te(...M)}}),ownerState:R}),[Me,ze]=E("content",{elementType:Mt,shouldForwardComponentProp:!0,externalForwardedProps:V,additionalProps:{message:b,action:g},ownerState:R}),[Oe,Le]=E("transition",{elementType:De,externalForwardedProps:V,getSlotProps:P=>({onEnter:(...M)=>{var L;(L=P.onEnter)==null||L.call(P,...M),Ae(...M)},onExited:(...M)=>{var L;(L=P.onExited)==null||L.call(P,...M),Pe(...M)}}),additionalProps:{appear:!0,in:r,timeout:O,direction:h==="top"?"down":"up"},ownerState:R});return!r&&Ne?null:e.jsx(Te,{...Ie,children:e.jsx(Re,{...Ee,children:e.jsx(Oe,{...Le,children:l||e.jsx(Me,{...ze})})})})});function $t({setCurrTest:t,setCurrSection:n,setSnackbar:o,sectionId:s,testId:d}){const[f,g]=u.useState({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]}),h=async p=>{p.preventDefault();try{const x=await H.post(`${_}/api/v2/test/${d}/section/${s}/add-question`,f,{withCredentials:!0});n(l=>({...l,questionSet:[...(l==null?void 0:l.questionSet)||[],f]})),o({open:!0,message:"Question added!",severity:"success"}),g({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})}catch(x){console.error(x),o({open:!0,message:"Failed to add question",severity:"error"})}};return e.jsxs(oe,{elevation:1,className:"p-4 space-y-4",children:[e.jsx(He,{variant:"subtitle1",sx:{fontWeight:600},children:"Add Question"}),e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsx(X,{fullWidth:!0,label:"Question",size:"small",variant:"outlined",value:f.question,onChange:p=>g(x=>({...x,question:p.target.value})),required:!0}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:f.answerOptions.map((p,x)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{size:"small",checked:p.isCorrect,onChange:()=>{const l=f.answerOptions.map((m,S)=>({...m,isCorrect:S===x}));g(m=>({...m,answerOptions:l}))}}),e.jsx(X,{label:`Option ${String.fromCharCode(65+x)}`,size:"small",fullWidth:!0,variant:"standard",value:p.text,onChange:l=>{const m=[...f.answerOptions];m[x].text=l.target.value,g(S=>({...S,answerOptions:m}))},required:!0})]},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{label:"Marks",type:"number",size:"small",value:f.marks,onChange:p=>g(x=>({...x,marks:parseFloat(p.target.value)})),required:!0}),e.jsx(X,{label:"Negative",type:"number",size:"small",value:f.negative,onChange:p=>g(x=>({...x,negative:parseFloat(p.target.value)})),required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Ce,{title:"Add question",children:e.jsx(Q,{type:"submit",variant:"contained",size:"small",endIcon:e.jsx(re,{sx:{fontSize:16}}),sx:{fontSize:12,textTransform:"none"},children:"Add"})})})]})]})}const Ft=({closeModal:t,setSnackbar:n})=>{const[o,s]=u.useState({title:"",description:"",difficulty:"Easy"}),[d,f]=u.useState([{input:"",output:"",explanation:""}]),[g,h]=u.useState([{input:"",output:""}]),[p,x]=u.useState([]),[l,m]=u.useState("python"),[S,k]=u.useState(""),c=r=>{s({...o,[r.target.name]:r.target.value})},b=(r,i,y,I=!1)=>{const N=I?[...d]:[...g];N[r][i]=y,I?f(N):h(N)},w=(r=!1)=>{const i=r?{input:"",output:"",explanation:""}:{input:"",output:""};r?f([...d,i]):h([...g,i])},v=(r,i=!1)=>{const y=i?[...d]:[...g];y.splice(r,1),i?f(y):h(y)},j=()=>{if(p.some(r=>r.language===l)){alert(`Signature for ${l} already exists`);return}x([...p,{language:l,signature:S}]),k("")},a=r=>{const i=[...p];i.splice(r,1),x(i)},C=async r=>{r.preventDefault();const i={...o,sampleTestCases:d,testCases:g,functionSignatures:p};try{const y=await H.post(`${_}/api/v2/test/problem/add`,{...o,sampleTestCases:d,testCases:g,functionSignatures:p},{withCredentials:!0});console.log("Submitted data",i),s({title:"",description:"",difficulty:"Easy"}),f([{input:"",output:"",explanation:""}]),h([{input:"",output:""}]),x([]),n({open:!0,message:y.data.message,severity:"success"}),t()}catch(y){console.error(y),n({open:!0,message:res.data.message,severity:"error"})}};return e.jsx("div",{className:"fixed top-0 left-0 z-50 h-screen overflow-y-scroll bg-opacity-30 inset-0 bg-black rounded-lg",children:e.jsxs("div",{className:"flex flex-col py-5  w-screen h-screen",children:[e.jsx("div",{className:"flex w-full fixed top-5 right-5 z-50 justify-end px-6 py-3",children:e.jsx(ie,{sx:{bgcolor:"#000",color:"#fff"},onClick:t,children:e.jsx(et,{color:"inherit"})})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add a New Problem"}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Title"}),e.jsx("input",{name:"title",value:o.title,onChange:c,className:"w-full border p-2 rounded mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Description"}),e.jsx("textarea",{name:"description",value:o.description,onChange:c,rows:4,className:"w-full border p-2 rounded mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Difficulty"}),e.jsxs("select",{name:"difficulty",value:o.difficulty,onChange:c,className:"w-full border p-2 rounded mt-1",required:!0,children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Function Signatures"}),p.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Language: "}),r.language]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Signature: "}),r.signature]})]}),e.jsx("button",{type:"button",onClick:()=>a(i),className:"text-red-500 mt-1 text-sm",children:"❌ Remove"})]},i)),e.jsxs("div",{className:"grid grid-cols-1  gap-2",children:[e.jsx(_e,{fullWidth:!0,children:e.jsxs(ye,{variant:"standard",className:"px-3",onChange:r=>m(r.target.value),value:l,children:[e.jsx(D,{value:"cpp",children:"C++"}),e.jsx(D,{value:"c",children:"C"}),e.jsx(D,{value:"java",children:"Java"}),e.jsx(D,{value:"python",children:"Python"})]})}),e.jsx("div",{className:"w-full",children:e.jsx(Je,{height:"300px",language:l==="python"?"python":l,theme:"vs-light",value:S,onChange:r=>k(r),options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,padding:"10px"}})})]}),e.jsx("button",{type:"button",onClick:j,className:"bg-green-100 mt-3 border border-green-500 px-2 py-1 rounded text-sm",children:"➕ Add Function Signature"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Test Cases"}),g.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"Input",value:r.input,onChange:y=>b(i,"input",y.target.value),className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:r.output,onChange:y=>b(i,"output",y.target.value),className:"p-2 border rounded",required:!0})]}),e.jsx("button",{type:"button",onClick:()=>v(i),className:"text-red-500 mt-1 text-sm",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(),className:"bg-green-100 border border-green-500 px-2 py-1 rounded text-sm",children:"➕ Add Test Case"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Sample Test Cases"}),d.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsx("input",{type:"text",placeholder:"Input",value:r.input,onChange:y=>b(i,"input",y.target.value,!0),className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:r.output,onChange:y=>b(i,"output",y.target.value,!0),className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Explanation",value:r.explanation,onChange:y=>b(i,"explanation",y.target.value,!0),className:"p-2 border rounded"})]}),e.jsx("button",{type:"button",onClick:()=>v(i,!0),className:"text-red-500 mt-1 text-sm",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(!0),className:"bg-green-100 border border-green-500 px-2 py-1 rounded text-sm",children:"➕ Add Sample Test Case"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition",children:"Submit Problem"})})]})]}),"̰"]})})};function Bt({testId:t,sectionId:n}){const[o,s]=u.useState(!1),[d,f]=u.useState([]),[g,h]=u.useState(""),[p,x]=u.useState(!1),[l,m]=u.useState({open:!1,message:"",severity:"success"}),S=async()=>{x(!0);try{const c=await H.get(`${_}/api/v2/test/problems/get`,{withCredentials:!0});f(c.data)}catch(c){console.error(c),m({open:!0,message:"Failed to fetch problems",severity:"error"})}finally{x(!1)}},k=async()=>{var c,b;if(!g)return m({open:!0,message:"Please select a problem",severity:"warning"});try{const w=await H.post(`${_}/api/v2/test/section/${t}/${n}/add-problem`,{problemId:g},{withCredentials:!0});m({open:!0,message:w.data.message,severity:"success"})}catch(w){console.error(w),m({open:!0,message:((b=(c=w.response)==null?void 0:c.data)==null?void 0:b.message)||"Failed to add problem",severity:"error"})}};return u.useEffect(()=>{S()},[]),e.jsxs(e.Fragment,{children:[o&&e.jsx(Ft,{setSnackbar:m,closeModal:()=>{s(!1),S()}}),e.jsxs("section",{className:"flex justify-between items-center",children:[e.jsx(Q,{onClick:()=>s(!0),variant:"contained",sx:{fontSize:11},startIcon:e.jsx(re,{}),children:"Add New Problem"}),e.jsxs("div",{className:"flex gap-4 mt-5 items-center",children:[p?e.jsx(Ge,{size:24}):e.jsxs(ye,{variant:"standard",value:g,onChange:c=>h(c.target.value),displayEmpty:!0,sx:{minWidth:250},children:[e.jsx(D,{value:"",disabled:!0,children:"Select Problem"}),d.map(c=>e.jsx(D,{value:c._id,children:c.title},c._id))]}),e.jsx(Q,{onClick:k,variant:"contained",color:"primary",sx:{fontSize:9},disabled:!g,children:"Add to Section"})]})]}),e.jsx(ke,{open:l.open,autoHideDuration:4e3,onClose:()=>m({...l,open:!1}),children:e.jsx(Se,{onClose:()=>m({...l,open:!1}),severity:l.severity,variant:"filled",children:l.message})})]})}const qt=Fe.lazy(()=>Be(()=>import("./AddSectionModal-mM7ROjHy.js"),__vite__mapDeps([0,1,2,3,4,5,6])));function ls(){var w,v,j;const{id:t}=$e(),[n,o]=u.useState(null),[s,d]=u.useState(),[f,g]=u.useState(!1),[h,p]=u.useState({name:"",duration:"",isAvailable:!1}),[x,l]=u.useState(!1),[m,S]=u.useState({open:!1,message:"",severity:"success"}),k=a=>{const{name:C,value:r,type:i,checked:y}=a.target,I=i==="checkbox"?y:r;p(N=>({...N,[C]:I}))},c=()=>{S(a=>({...a,open:!1}))},b=async a=>{var C,r;a.preventDefault(),l(!0);try{const i=await H.post(`${_}/api/v2/test/edit/${t}`,h,{withCredentials:!0});S({open:!0,message:"Test updated successfully!",severity:"success"})}catch(i){const y=((r=(C=i.response)==null?void 0:C.data)==null?void 0:r.message)||"Failed to update test.";S({open:!0,message:y,severity:"error"})}finally{l(!1)}};return u.useEffect(()=>{H.get(`${_}/api/v2/test/${t}`,{withCredentials:!0}).then(a=>{var C;o(a.data),d((C=a.data)==null?void 0:C.sections[0]),p({name:a.data.name||"",duration:parseInt(a.data.duration)||0,isAvailable:a.data.isAvailable||!1})}).catch(a=>console.log(a))},[t]),e.jsxs("div",{className:"b",children:[e.jsxs("main",{className:"flex gap-4",children:[e.jsxs("form",{onSubmit:b,className:"flex-1 border rounded-lg items-center py-3 grid grid-cols-1 space-y-3 shadow-lg font-sans  p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test id : "}),e.jsx("input",{className:"custominput",type:"text",value:n==null?void 0:n._id,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test name : "}),e.jsx("input",{className:"custominput",type:"text",name:"name",value:h==null?void 0:h.name,onChange:k})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test duration : "}),e.jsx("input",{className:"custominput",type:"text",name:"duration",onChange:k,value:h.duration})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test decription : "}),e.jsx("input",{className:"custominput",type:"text",value:n==null?void 0:n.description,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Is Available "}),e.jsx("input",{className:"",type:"checkbox",name:"isAvailable",onChange:k,checked:h.isAvailable})]}),e.jsx(Q,{type:"submit",sx:{fontSize:11,width:"100px"},variant:"contained",children:"Update"})]}),e.jsxs("section",{className:"flex-[0.7] justify-start border flex-col rounded-lg items-center py-3 flex gap-4 shadow-lg font-sans  p-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full p-2 bg-white shadow-md rounded-md",children:(w=n==null?void 0:n.sections)==null?void 0:w.map((a,C)=>e.jsx("div",{className:"w-full",children:e.jsx(Q,{fullWidth:!0,onClick:()=>d(a),sx:{justifyContent:"flex-start",fontSize:12,textTransform:"none",backgroundColor:a._id===(s==null?void 0:s._id)?"#333":"#FFA500",color:a._id===(s==null?void 0:s._id)?"#fff":"#000","&:hover":{backgroundColor:a._id===(s==null?void 0:s._id)?"#111":"#e69500"},borderRadius:"8px",padding:"6px 12px"},variant:"contained",children:a.name})},a._id))}),e.jsx(Ce,{title:"Add section",children:e.jsx(ie,{onClick:()=>{g(!0)},color:"primary",focusRipple:!0,children:e.jsx(re,{})})})]})]}),e.jsxs("section",{className:"mt-4",children:[s&&(s==null?void 0:s.sectionType)=="Quiz"&&e.jsx($t,{setCurrSection:d,setCurrTest:o,setSnackbar:S,sectionId:s==null?void 0:s._id,testId:t}),s&&(s==null?void 0:s.sectionType)=="Coding"&&e.jsx(e.Fragment,{children:e.jsx(Bt,{testId:t,sectionId:s==null?void 0:s._id})})]}),t&&f&&e.jsx(u.Suspense,{fallback:e.jsx("div",{children:e.jsx("div",{className:"loader"})}),children:e.jsx(qt,{closeModal:()=>{g(!1)},testId:t})}),e.jsxs("section",{className:"mt-4",children:[(v=s==null?void 0:s.questionSet)==null?void 0:v.map((a,C)=>e.jsxs(me,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:C+1+". "}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Question"}),e.jsx("input",{type:"text",className:"custominput",value:a.question,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Marks"}),e.jsx("input",{type:"number",className:"custominput ",value:a.negative,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Negative"}),e.jsx("input",{type:"number",className:"custominput ",value:a.marks,name:"",id:""})]})]})}),e.jsx(xe,{children:a.answerOptions.map((r,i)=>e.jsxs("div",{className:"flex mb-1 gap-3 items-center",children:[e.jsxs("p",{className:"text-xs text-nowrap",children:["Option ",i+1]}),e.jsx("input",{style:{width:"300px"},type:"text",className:"custominput w-[100px]",value:r.text,name:"",id:""}),e.jsx("input",{type:"checkbox",checked:r.isCorrect,placeholder:"isCorrect",name:"",id:""})]}))})]})),(j=s==null?void 0:s.problemset)==null?void 0:j.map((a,C)=>e.jsxs(me,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:C+1+". "}),e.jsx("p",{children:a.title})]})}),e.jsx(xe,{children:e.jsx(e.Fragment,{children:e.jsx("p",{children:a.description})})})]}))]}),e.jsx(ke,{open:m.open,autoHideDuration:3e3,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Se,{onClose:c,severity:m.severity,sx:{width:"100%"},children:m.message})})]})}export{ls as default};
