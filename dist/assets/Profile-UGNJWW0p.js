import{r as a,d as G,b as U,j as e,a as S,B}from"./index-f_TJ5S0E.js";const _=["https://cdn.jsdelivr.net/gh/alohe/avatars/png/vibrent_20.png","https://cdn.jsdelivr.net/gh/alohe/avatars/png/upstream_17.png","https://cdn.jsdelivr.net/gh/alohe/avatars/png/teams_1.png","https://cdn.jsdelivr.net/gh/alohe/avatars/png/upstream_19.png","https://cdn.jsdelivr.net/gh/alohe/avatars/png/upstream_20.png","https://cdn.jsdelivr.net/gh/alohe/avatars/png/toon_7.png","https://cdn.jsdelivr.net/gh/alohe/avatars/png/toon_6.png","https://cdn.jsdelivr.net/gh/alohe/avatars/png/vibrent_17.png"],R=["Data Science","Full Stack Development","Artificial Intelligence & Machine Learning (AI/ML)","Cyber Security","Cloud Computing","Software Engineering","Blockchain Technology","Internet of Things (IoT)","Game Development","Augmented Reality (AR) & Virtual Reality (VR)","Computer Vision","Natural Language Processing (NLP)","DevOps","Mobile App Development","Embedded Systems","Human-Computer Interaction","Robotics","Quantum Computing","Big Data Analytics","Information Systems","Bioinformatics","High Performance Computing","Edge Computing","Computer Graphics & Animation","Other"],z=["2025","2026","2027","2028","2029","2030","2031","2032","2033","2034","2035","2036","2037"],I=["1","2","3","4","5","6"],F=["B.Tech in Computer Science Engineering","B.Tech in Mechanical Engineering","B.Tech in Electrical Engineering","B.Tech in Civil Engineering","B.Tech in Electronics and Communication Engineering","Bachelor of Computer Applications (BCA)","B.Sc in Information Technology","Bachelor of Business Administration (BBA)","Bachelor of Commerce (B.Com)","Bachelor of Economics (B.Econ)","Bachelor of Arts (BA) in English Literature","BA in History","BA in Sociology","BA in Political Science","Bachelor of Science (B.Sc) in Physics","B.Sc in Chemistry","B.Sc in Mathematics","B.Sc in Biotechnology","B.Sc in Environmental Science","Bachelor of Pharmacy (B.Pharm)","Bachelor of Physiotherapy (BPT)","Bachelor of Science in Nursing (B.Sc Nursing)","MBBS (Bachelor of Medicine and Surgery)","Bachelor of Dental Surgery (BDS)","Bachelor of Fine Arts (BFA)","Bachelor of Design (B.Des) in Fashion Design","B.Des in Interior Design","Bachelor of Laws (LLB)","M.Tech in Computer Science Engineering","M.Tech in Mechanical Engineering","M.Tech in Electrical Engineering","M.Tech in Civil Engineering","M.Tech in Electronics and Communication Engineering","Masters of Computer Applications (MCA)","M.Sc in Information Technology","Master of Business Administration (MBA)","Master of Commerce (M.Com)","Master of Economics (M.Econ)","Master of Arts (MA) in English Literature","MA in History","MA in Sociology","MA in Political Science","Master of Science (M.Sc) in Physics","M.Sc in Chemistry","M.Sc in Mathematics","M.Sc in Biotechnology","M.Sc in Environmental Science","Master of Pharmacy (M.Pharm)","Master of Physiotherapy (MPT)","Master of Science in Nursing (M.Sc Nursing)","Master of Fine Arts (MFA)","Master of Design (M.Des) in Fashion Design","M.Des in Interior Design","Master of Laws (LLM)"],W=()=>{const f=a.useRef({}),M=r=>{const s=f.current[`${r}-input`];if(!s)return!1;const o=s.getBoundingClientRect();return window.innerHeight-o.bottom<200},t=G(r=>r.auth.user),[i,c]=a.useState({yearOfGraduation:"",university:"",program:"",semester:"",specialisation:""}),[d,v]=a.useState(""),[C,m]=a.useState(!1),[u,y]=a.useState(""),[b,w]=a.useState(!1),[j,k]=a.useState([]),[A,h]=a.useState(!1),[l,x]=a.useState({program:!1,specialisation:!1,yearOfGraduation:!1,semester:!1}),E=U();a.useEffect(()=>{t&&(c({yearOfGraduation:t.yearOfGraduation||"",university:t.university||"",program:t.program||"",semester:t.semester||"",specialisation:t.specialisation||""}),v(t.avatar||""))},[t]);const L=r=>{r.target.name==="university"&&(c({...i,[r.target.name]:r.target.value}),D(r.target.value),h(r.target.value.length>0))},D=async r=>{if(r)try{const o=(await S.get(`${B}/university/data/${r}`)).data.map(n=>n.name);k(o)}catch(s){console.error("Error fetching universities:",s)}},P=r=>{c({...i,university:r}),h(!1)},g=(r,s)=>{c({...i,[r]:s}),x({...l,[r]:!1})},p=r=>{const s=Object.keys(l).reduce((o,n)=>(o[n]=n===r?!l[n]:!1,o),{});x(s),h(!1)},N=r=>{r.target.closest(".dropdown-container")||(x({program:!1,specialisation:!1,yearOfGraduation:!1,semester:!1}),h(!1))};a.useEffect(()=>(document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}),[]);const O=r=>{v(r),m(!1)},T=async r=>{var s,o;if(r.preventDefault(),!(t!=null&&t._id))return y("User not authenticated");try{w(!0);const n={...i,_id:t._id,avatar:d};await S.post(`${B}/auth/complete-profile`,n,{withCredentials:!0}),E("/user",{replace:!0}),window.location.reload()}catch(n){y(((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.error)||"Update failed. Please try again.")}finally{w(!1)}};return e.jsxs("div",{className:"mt-10 flex items-center justify-center",children:[C&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full animate-fade-in shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-center mb-4 text-[#db5602]",children:"Choose Your Avatar"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:_.map(r=>e.jsx("img",{src:r,alt:"avatar",onClick:()=>O(r),className:`w-16 h-16 rounded-full cursor-pointer transition-all ${d===r?"ring-4 ring-[#db5602] scale-110":"hover:ring-2 hover:ring-[#db5602]/50"}`},r))}),e.jsx("button",{onClick:()=>m(!1),className:"mt-6 w-full py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition text-[#db5602] font-medium",children:"Close"})]})}),e.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#db5602] to-[#e67a34] p-4 text-white text-center",children:e.jsx("h2",{className:"text-xl font-bold",children:"Edit Your Profile"})}),e.jsxs("div",{className:"p-5 space-y-4 bg-gradient-to-br from-[#fff8f5] to-[#fdeee6]",children:[u&&e.jsx("div",{className:`p-2 rounded-md text-sm text-center ${u.includes("success")||u.includes("updated")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:u}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{onClick:()=>m(!0),className:"relative w-16 h-16 rounded-full bg-gray-200 overflow-hidden cursor-pointer mb-2 border-2 border-white shadow-md hover:border-[#db5602] transition",children:d?e.jsx("img",{src:d,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full text-[#db5602]/50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),e.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-xs text-[#db5602] hover:text-[#b34600] transition font-medium",children:"Change avatar"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1 relative dropdown-container",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["University",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"university",value:i.university,onChange:L,required:!0,placeholder:"Search for your university",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#db5602] focus:border-transparent"}),A&&j.length>0&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60  max-h-[200px] overflow-auto",children:j.map((r,s)=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>P(r),children:r},s))})]})]}),e.jsxs("div",{className:"space-y-1 relative dropdown-container",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Program",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#db5602] focus:border-transparent bg-white cursor-pointer flex items-center truncate",onClick:()=>p("program"),children:[e.jsx("span",{className:"truncate flex-1",children:i.program||"Select your program"}),e.jsx("svg",{className:"h-5 w-5 text-gray-400 ml-2 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),l.program&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-[200px] overflow-y-auto",children:F.map((r,s)=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>g("program",r),children:r},s))})]})]}),e.jsxs("div",{className:"space-y-1 relative dropdown-container",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Specialisation",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#db5602] focus:border-transparent bg-white cursor-pointer flex items-center truncate",onClick:()=>p("specialisation"),children:[e.jsx("span",{className:"truncate flex-1",children:i.specialisation||"Select your specialisation"}),e.jsx("svg",{className:"h-5 w-5 text-gray-400 ml-2 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),l.specialisation&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 max-h-[130px] overflow-auto",children:R.map((r,s)=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>g("specialisation",r),children:r},s))})]})]}),e.jsxs("div",{className:"space-y-1 relative dropdown-container",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Semester"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#db5602] focus:border-transparent bg-white cursor-pointer flex justify-between items-center",onClick:()=>p("semester"),children:[i.semester||"Select your semester",e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),l.semester&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 max-h-[130px] overflow-auto",children:I.map((r,s)=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>g("semester",r),children:r},s))})]})]}),e.jsxs("div",{className:"space-y-1 relative dropdown-container",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Graduation Year",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#db5602] focus:border-transparent bg-white cursor-pointer flex justify-between items-center truncate overflow-x-auto whitespace-nowrap",onClick:()=>p("yearOfGraduation"),ref:r=>f.current["yearOfGraduation-input"]=r,children:[i.yearOfGraduation||"Select graduation year",e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),l.yearOfGraduation&&e.jsx("div",{className:`absolute z-10 ${M("yearOfGraduation")?"bottom-full mb-1":"mt-1"} w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-[130px] overflow-y-auto`,ref:r=>f.current["yearOfGraduation-dropdown"]=r,children:z.map((r,s)=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>g("yearOfGraduation",r),children:r},s))})]})]})]}),e.jsx("button",{type:"submit",disabled:b,className:"w-full py-2 bg-[#db5602] hover:bg-[#b34600] text-white font-medium rounded-md transition flex items-center justify-center shadow-md hover:shadow-lg",children:b?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Update Profile"})]})]})]})]})};export{W as default};
