const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddSectionModal-DMJFYRC5.js","assets/index-S7cYxM_B.js","assets/index-CTHmATsE.css","assets/IconButton-DDoNbCQT.js","assets/createSimplePaletteValueFilter-9aNoSHvX.js","assets/CircularProgress-E9bXQN4n.js","assets/ButtonBase-CphgOx8x.js","assets/Close-BsASwap6.js","assets/createSvgIcon-CautBTPO.js"])))=>i.map(i=>d[i]);
import{j as e,r as u,a as q,B as H,e as $e,h as Fe,_ as Be}from"./index-S7cYxM_B.js";import{P as oe,G as De}from"./Menu-D3f_Te6q.js";import{T as qe}from"./Typography-CmGfFPnw.js";import{T as V}from"./TextField-C4xC4Dpt.js";import{a as X,g as Z,e as K,s as R,b as ne,f as M,c as J,m as Q,h as le,l as ce,i as W,u as He,j as ye,k as de,n as _e}from"./createSimplePaletteValueFilter-9aNoSHvX.js";import{S as We}from"./SwitchBase-BTWz5FMX.js";import{c as _}from"./createSvgIcon-CautBTPO.js";import{u as Ue,S as Qe}from"./Select-QS0NCit9.js";import{u as T,e as ue}from"./useSlot-DZ8_FYpd.js";import{c as Ge}from"./Modal-CQCgNn6j.js";import{T as je}from"./Tooltip-CaSEzRHL.js";import{B as U}from"./Button-C3PzBk_K.js";import{A as ae}from"./Add-CPBemgLx.js";import{d as Ve}from"./index-BWeRpMb0.js";import{C as Xe}from"./CircularProgress-E9bXQN4n.js";import{M as pe}from"./MenuItem-D5nBUDCV.js";import{a as se,b as Ze}from"./ButtonBase-CphgOx8x.js";import{g as Ke,a as te,u as Je}from"./Portal-ClC-8bNA.js";import{C as Ye}from"./Close-CpqfZ-K3.js";import{I as re}from"./IconButton-DDoNbCQT.js";import{C as et}from"./Close-BsASwap6.js";import{A as me,a as fe,b as xe}from"./AccordionSummary-BH0DNChN.js";import"./index-C_roNAU8.js";import"./useSlotProps-BfLjIFLB.js";import"./index-BIhq7hj2.js";import"./Popper-DY0JmY0I.js";import"./dividerClasses-Bn-VnSkG.js";function tt(t){return Z("MuiAlert",t)}const ge=X("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),st=_(e.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ot=_(e.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),nt=_(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),at=_(e.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),rt=t=>{const{variant:o,color:n,severity:s,classes:d}=t,m={root:["root",`color${M(n||s)}`,`${o}${M(n||s)}`,`${o}`],icon:["icon"],message:["message"],action:["action"]};return J(m,tt,d)},it=R(oe,{name:"MuiAlert",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.variant],o[`${n.variant}${M(n.color||n.severity)}`]]}})(Q(({theme:t})=>{const o=t.palette.mode==="light"?le:ce,n=t.palette.mode==="light"?ce:le;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(W(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:o(t.palette[s].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${s}StandardBg`]:n(t.palette[s].light,.9),[`& .${ge.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(W(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:o(t.palette[s].light,.6),border:`1px solid ${(t.vars||t).palette[s].light}`,[`& .${ge.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(W(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${s}FilledColor`],backgroundColor:t.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[s].dark:t.palette[s].main,color:t.palette.getContrastText(t.palette[s].main)}}}))]}})),lt=R("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,o)=>o.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),ct=R("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,o)=>o.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),dt=R("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,o)=>o.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),he={success:e.jsx(st,{fontSize:"inherit"}),warning:e.jsx(ot,{fontSize:"inherit"}),error:e.jsx(nt,{fontSize:"inherit"}),info:e.jsx(at,{fontSize:"inherit"})},Ce=u.forwardRef(function(o,n){const s=K({props:o,name:"MuiAlert"}),{action:d,children:m,className:g,closeText:h="Close",color:f,components:x={},componentsProps:c={},icon:p,iconMapping:S=he,onClose:k,role:l="alert",severity:y="success",slotProps:w={},slots:b={},variant:j="standard",...a}=s,C={...s,color:f,severity:y,variant:j,colorSeverity:f||y},r=rt(C),i={slots:{closeButton:x.CloseButton,closeIcon:x.CloseIcon,...b},slotProps:{...c,...w}},[v,P]=T("root",{ref:n,shouldForwardComponentProp:!0,className:ne(r.root,g),elementType:it,externalForwardedProps:{...i,...a},ownerState:C,additionalProps:{role:l,elevation:0}}),[N,I]=T("icon",{className:r.icon,elementType:lt,externalForwardedProps:i,ownerState:C}),[F,B]=T("message",{className:r.message,elementType:ct,externalForwardedProps:i,ownerState:C}),[O,$]=T("action",{className:r.action,elementType:dt,externalForwardedProps:i,ownerState:C}),[E,D]=T("closeButton",{elementType:re,externalForwardedProps:i,ownerState:C}),[Y,ee]=T("closeIcon",{elementType:Ye,externalForwardedProps:i,ownerState:C});return e.jsxs(v,{...P,children:[p!==!1?e.jsx(N,{...I,children:p||S[y]||he[y]}):null,e.jsx(F,{...B,children:m}),d!=null?e.jsx(O,{...$,children:d}):null,d==null&&k?e.jsx(O,{...$,children:e.jsx(E,{size:"small","aria-label":h,title:h,color:"inherit",onClick:k,...D,children:e.jsx(Y,{fontSize:"small",...ee})})}):null]})});function ve(t){return t.substring(2).toLowerCase()}function ut(t,o){return o.documentElement.clientWidth<t.clientX||o.documentElement.clientHeight<t.clientY}function pt(t){const{children:o,disableReactTree:n=!1,mouseEvent:s="onClick",onClickAway:d,touchEvent:m="onTouchEnd"}=t,g=u.useRef(!1),h=u.useRef(null),f=u.useRef(!1),x=u.useRef(!1);u.useEffect(()=>(setTimeout(()=>{f.current=!0},0),()=>{f.current=!1}),[]);const c=He(Ke(o),h),p=se(l=>{const y=x.current;x.current=!1;const w=te(h.current);if(!f.current||!h.current||"clientX"in l&&ut(l,w))return;if(g.current){g.current=!1;return}let b;l.composedPath?b=l.composedPath().includes(h.current):b=!w.documentElement.contains(l.target)||h.current.contains(l.target),!b&&(n||!y)&&d(l)}),S=l=>y=>{x.current=!0;const w=o.props[l];w&&w(y)},k={ref:c};return m!==!1&&(k[m]=S(m)),u.useEffect(()=>{if(m!==!1){const l=ve(m),y=te(h.current),w=()=>{g.current=!0};return y.addEventListener(l,p),y.addEventListener("touchmove",w),()=>{y.removeEventListener(l,p),y.removeEventListener("touchmove",w)}}},[p,m]),s!==!1&&(k[s]=S(s)),u.useEffect(()=>{if(s!==!1){const l=ve(s),y=te(h.current);return y.addEventListener(l,p),()=>{y.removeEventListener(l,p)}}},[p,s]),u.cloneElement(o,k)}const mt=_(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),ft=_(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),xt=R("span",{shouldForwardProp:ye})({position:"relative",display:"flex"}),gt=R(mt)({transform:"scale(1)"}),ht=R(ft)(Q(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function Se(t){const{checked:o=!1,classes:n={},fontSize:s}=t,d={...t,checked:o};return e.jsxs(xt,{className:n.root,ownerState:d,children:[e.jsx(gt,{fontSize:s,className:n.background,ownerState:d}),e.jsx(ht,{fontSize:s,className:n.dot,ownerState:d})]})}const vt=u.createContext(void 0);function bt(){return u.useContext(vt)}function yt(t){return Z("MuiRadio",t)}const be=X("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),jt=t=>{const{classes:o,color:n,size:s}=t,d={root:["root",`color${M(n)}`,s!=="medium"&&`size${M(s)}`]};return{...o,...J(d,yt,o)}},Ct=R(We,{shouldForwardProp:t=>ye(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,n.size!=="medium"&&o[`size${M(n.size)}`],o[`color${M(n.color)}`]]}})(Q(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${be.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:de(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(W()).map(([o])=>({props:{color:o,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[o].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:de(t.palette[o].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(W()).map(([o])=>({props:{color:o,disabled:!1},style:{[`&.${be.checked}`]:{color:(t.vars||t).palette[o].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function St(t,o){return typeof o=="object"&&o!==null?t===o:String(t)===String(o)}const wt=e.jsx(Se,{checked:!0}),kt=e.jsx(Se,{}),Nt=u.forwardRef(function(o,n){const s=K({props:o,name:"MuiRadio"}),{checked:d,checkedIcon:m=wt,color:g="primary",icon:h=kt,name:f,onChange:x,size:c="medium",className:p,disabled:S,disableRipple:k=!1,slots:l={},slotProps:y={},inputProps:w,...b}=s,j=Ue();let a=S;j&&typeof a>"u"&&(a=j.disabled),a??(a=!1);const C={...s,disabled:a,disableRipple:k,color:g,size:c},r=jt(C),i=bt();let v=d;const P=Ge(x,i&&i.onChange);let N=f;i&&(typeof v>"u"&&(v=St(i.value,s.value)),typeof N>"u"&&(N=i.name));const I=y.input??w,[F,B]=T("root",{ref:n,elementType:Ct,className:ne(r.root,p),shouldForwardComponentProp:!0,externalForwardedProps:{slots:l,slotProps:y,...b},getSlotProps:O=>({...O,onChange:($,...E)=>{var D;(D=O.onChange)==null||D.call(O,$,...E),P($,...E)}}),ownerState:C,additionalProps:{type:"radio",icon:u.cloneElement(h,{fontSize:h.props.fontSize??c}),checkedIcon:u.cloneElement(m,{fontSize:m.props.fontSize??c}),disabled:a,name:N,checked:v,slots:l,slotProps:{input:typeof I=="function"?I(C):I}}});return e.jsx(F,{...B,classes:r})});function Pt(t={}){const{autoHideDuration:o=null,disableWindowBlurListener:n=!1,onClose:s,open:d,resumeHideDuration:m}=t,g=Ze();u.useEffect(()=>{if(!d)return;function b(j){j.defaultPrevented||j.key==="Escape"&&(s==null||s(j,"escapeKeyDown"))}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[d,s]);const h=se((b,j)=>{s==null||s(b,j)}),f=se(b=>{!s||b==null||g.start(b,()=>{h(null,"timeout")})});u.useEffect(()=>(d&&f(o),g.clear),[d,o,f,g]);const x=b=>{s==null||s(b,"clickaway")},c=g.clear,p=u.useCallback(()=>{o!=null&&f(m??o*.5)},[o,m,f]),S=b=>j=>{const a=b.onBlur;a==null||a(j),p()},k=b=>j=>{const a=b.onFocus;a==null||a(j),c()},l=b=>j=>{const a=b.onMouseEnter;a==null||a(j),c()},y=b=>j=>{const a=b.onMouseLeave;a==null||a(j),p()};return u.useEffect(()=>{if(!n&&d)return window.addEventListener("focus",p),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",c)}},[n,d,p,c]),{getRootProps:(b={})=>{const j={...ue(t),...ue(b)};return{role:"presentation",...b,...j,onBlur:S(j),onFocus:k(j),onMouseEnter:l(j),onMouseLeave:y(j)}},onClickAway:x}}function At(t){return Z("MuiSnackbarContent",t)}X("MuiSnackbarContent",["root","message","action"]);const Rt=t=>{const{classes:o}=t;return J({root:["root"],action:["action"],message:["message"]},At,o)},Et=R(oe,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,o)=>o.root})(Q(({theme:t})=>{const o=t.palette.mode==="light"?.8:.98,n=_e(t.palette.background.default,o);return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Tt=R("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,o)=>o.message})({padding:"8px 0"}),Mt=R("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,o)=>o.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),It=u.forwardRef(function(o,n){const s=K({props:o,name:"MuiSnackbarContent"}),{action:d,className:m,message:g,role:h="alert",...f}=s,x=s,c=Rt(x);return e.jsxs(Et,{role:h,square:!0,elevation:6,className:ne(c.root,m),ownerState:x,ref:n,...f,children:[e.jsx(Tt,{className:c.message,ownerState:x,children:g}),d?e.jsx(Mt,{className:c.action,ownerState:x,children:d}):null]})});function zt(t){return Z("MuiSnackbar",t)}X("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Ot=t=>{const{classes:o,anchorOrigin:n}=t,s={root:["root",`anchorOrigin${M(n.vertical)}${M(n.horizontal)}`]};return J(s,zt,o)},Lt=R("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[`anchorOrigin${M(n.anchorOrigin.vertical)}${M(n.anchorOrigin.horizontal)}`]]}})(Q(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:o})=>o.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:o})=>o.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:o})=>o.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:o})=>o.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:o})=>o.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),we=u.forwardRef(function(o,n){const s=K({props:o,name:"MuiSnackbar"}),d=Je(),m={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{action:g,anchorOrigin:{vertical:h,horizontal:f}={vertical:"bottom",horizontal:"left"},autoHideDuration:x=null,children:c,className:p,ClickAwayListenerProps:S,ContentProps:k,disableWindowBlurListener:l=!1,message:y,onBlur:w,onClose:b,onFocus:j,onMouseEnter:a,onMouseLeave:C,open:r,resumeHideDuration:i,slots:v={},slotProps:P={},TransitionComponent:N,transitionDuration:I=m,TransitionProps:{onEnter:F,onExited:B,...O}={},...$}=s,E={...s,anchorOrigin:{vertical:h,horizontal:f},autoHideDuration:x,disableWindowBlurListener:l,TransitionComponent:N,transitionDuration:I},D=Ot(E),{getRootProps:Y,onClickAway:ee}=Pt({...E}),[ke,ie]=u.useState(!0),Ne=A=>{ie(!0),B&&B(A)},Pe=(A,z)=>{ie(!1),F&&F(A,z)},G={slots:{transition:N,...v},slotProps:{content:k,clickAwayListener:S,transition:O,...P}},[Ae,Re]=T("root",{ref:n,className:[D.root,p],elementType:Lt,getSlotProps:Y,externalForwardedProps:{...G,...$},ownerState:E}),[Ee,{ownerState:Te,...Me}]=T("clickAwayListener",{elementType:pt,externalForwardedProps:G,getSlotProps:A=>({onClickAway:(...z)=>{var L;(L=A.onClickAway)==null||L.call(A,...z),ee(...z)}}),ownerState:E}),[Ie,ze]=T("content",{elementType:It,shouldForwardComponentProp:!0,externalForwardedProps:G,additionalProps:{message:y,action:g},ownerState:E}),[Oe,Le]=T("transition",{elementType:De,externalForwardedProps:G,getSlotProps:A=>({onEnter:(...z)=>{var L;(L=A.onEnter)==null||L.call(A,...z),Pe(...z)},onExited:(...z)=>{var L;(L=A.onExited)==null||L.call(A,...z),Ne(...z)}}),additionalProps:{appear:!0,in:r,timeout:I,direction:h==="top"?"down":"up"},ownerState:E});return!r&&ke?null:e.jsx(Ee,{...Me,...v.clickAwayListener&&{ownerState:Te},children:e.jsx(Ae,{...Re,children:e.jsx(Oe,{...Le,children:c||e.jsx(Ie,{...ze})})})})});function $t({setCurrTest:t,setCurrSection:o,setSnackbar:n,sectionId:s,testId:d}){const[m,g]=u.useState({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]}),h=async f=>{f.preventDefault();try{const x=await q.post(`${H}/api/v2/test/${d}/section/${s}/add-question`,m,{withCredentials:!0});o(c=>({...c,questionSet:[...(c==null?void 0:c.questionSet)||[],m]})),n({open:!0,message:"Question added!",severity:"success"}),g({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})}catch(x){console.error(x),n({open:!0,message:"Failed to add question",severity:"error"})}};return e.jsxs(oe,{elevation:1,className:"p-4 space-y-4",children:[e.jsx(qe,{variant:"subtitle1",sx:{fontWeight:600},children:"Add Question"}),e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsx(V,{fullWidth:!0,label:"Question",size:"small",variant:"outlined",value:m.question,onChange:f=>g(x=>({...x,question:f.target.value})),required:!0}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.answerOptions.map((f,x)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{size:"small",checked:f.isCorrect,onChange:()=>{const c=m.answerOptions.map((p,S)=>({...p,isCorrect:S===x}));g(p=>({...p,answerOptions:c}))}}),e.jsx(V,{label:`Option ${String.fromCharCode(65+x)}`,size:"small",fullWidth:!0,variant:"standard",value:f.text,onChange:c=>{const p=[...m.answerOptions];p[x].text=c.target.value,g(S=>({...S,answerOptions:p}))},required:!0})]},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{label:"Marks",type:"number",size:"small",value:m.marks,onChange:f=>g(x=>({...x,marks:parseFloat(f.target.value)})),required:!0}),e.jsx(V,{label:"Negative",type:"number",size:"small",value:m.negative,onChange:f=>g(x=>({...x,negative:parseFloat(f.target.value)})),required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(je,{title:"Add question",children:e.jsx(U,{type:"submit",variant:"contained",size:"small",endIcon:e.jsx(ae,{sx:{fontSize:16}}),sx:{fontSize:12,textTransform:"none"},children:"Add"})})})]})]})}const Ft=({closeModal:t,setSnackbar:o})=>{const[n,s]=u.useState({title:"",description:"",difficulty:"Easy"}),[d,m]=u.useState([{input:"",output:"",explanation:""}]),[g,h]=u.useState([{input:"",output:""}]),[f,x]=u.useState([]),[c,p]=u.useState("python"),[S,k]=u.useState(""),l=r=>{const{name:i,value:v}=r.target;s(P=>({...P,[i]:v}))},y=(r,i,v,P=!1)=>{if(P){const N=[...d];N[r][i]=v,m(N)}else{const N=[...g];N[r][i]=v,h(N)}},w=(r=!1)=>{const i=r?{input:"",output:"",explanation:""}:{input:"",output:""};r?m([...d,i]):h([...g,i])},b=(r,i=!1)=>{if(i){const v=[...d];v.splice(r,1),m(v)}else{const v=[...g];v.splice(r,1),h(v)}},j=()=>{if(f.some(r=>r.language===c)){alert(`Signature for ${c} already exists`);return}if(!S.trim()){alert("Function signature cannot be empty");return}x([...f,{language:c,signature:S}]),k("")},a=r=>{const i=[...f];i.splice(r,1),x(i)},C=async r=>{var v,P;r.preventDefault();const i={title:n.title.trim(),description:n.description.trim(),difficulty:n.difficulty,sampleTestCases:d,testCases:g,functionSignatures:f};try{const N=await q.post(`${H}/api/v2/test/problem/add`,i,{withCredentials:!0});o({open:!0,message:N.data.message||"Problem added successfully!",severity:"success"}),s({title:"",description:"",difficulty:"Easy"}),m([{input:"",output:"",explanation:""}]),h([{input:"",output:""}]),x([]),t()}catch(N){console.error("Error submitting problem:",N);const I=((P=(v=N.response)==null?void 0:v.data)==null?void 0:P.message)||"Failed to add problem. Please try again later.";o({open:!0,message:I,severity:"error"})}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-30",children:e.jsxs("div",{className:"flex flex-col max-w-4xl mx-auto p-6 mt-12 bg-white shadow-lg rounded-lg",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(re,{sx:{bgcolor:"#000",color:"#fff"},onClick:t,children:e.jsx(et,{})})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add a New Problem"}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Title"}),e.jsx("input",{name:"title",value:n.title,onChange:l,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:n.description,onChange:l,rows:4,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Difficulty"}),e.jsxs("select",{name:"difficulty",value:n.difficulty,onChange:l,className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Function Signatures"}),f.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Language:"})," ",r.language," ",e.jsx("br",{}),e.jsx("strong",{children:"Signature:"})," ",e.jsx("pre",{className:"whitespace-pre-wrap",children:r.signature})]}),e.jsx("button",{type:"button",onClick:()=>a(i),className:"text-red-500 ml-4",children:"❌ Remove"})]},i)),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("select",{value:c,onChange:r=>p(r.target.value),className:"border p-2 rounded",children:[e.jsx("option",{value:"cpp",children:"C++"}),e.jsx("option",{value:"c",children:"C"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"python",children:"Python"})]}),e.jsx("div",{children:e.jsx(Ve,{height:"200px",language:c,theme:"vs-light",value:S,onChange:r=>k(r),options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,padding:"10px"}})})]}),e.jsx("button",{type:"button",onClick:j,className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Function Signature"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Test Cases"}),g.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex gap-2 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"Input",value:r.input,onChange:v=>y(i,"input",v.target.value),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:r.output,onChange:v=>y(i,"output",v.target.value),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(i),className:"text-red-500 self-center",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(),className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Test Case"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Sample Test Cases"}),d.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex gap-2 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"Input",value:r.input,onChange:v=>y(i,"input",v.target.value,!0),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:r.output,onChange:v=>y(i,"output",v.target.value,!0),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Explanation",value:r.explanation,onChange:v=>y(i,"explanation",v.target.value,!0),className:"flex-grow p-2 border rounded"}),e.jsx("button",{type:"button",onClick:()=>b(i,!0),className:"text-red-500 self-center",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(!0),className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Sample Test Case"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 transition",children:"Add Problem"})]})]})})};function Bt({testId:t,sectionId:o}){const[n,s]=u.useState(!1),[d,m]=u.useState([]),[g,h]=u.useState(""),[f,x]=u.useState(!1),[c,p]=u.useState({open:!1,message:"",severity:"success"}),S=async()=>{x(!0);try{const l=await q.get(`${H}/api/v2/test/problems/get`,{withCredentials:!0});m(l.data)}catch(l){console.error(l),p({open:!0,message:"Failed to fetch problems",severity:"error"})}finally{x(!1)}},k=async()=>{var l,y;if(!g)return p({open:!0,message:"Please select a problem",severity:"warning"});try{const w=await q.post(`${H}/api/v2/test/section/${t}/${o}/add-problem`,{problemId:g},{withCredentials:!0});p({open:!0,message:w.data.message,severity:"success"})}catch(w){console.error(w),p({open:!0,message:((y=(l=w.response)==null?void 0:l.data)==null?void 0:y.message)||"Failed to add problem",severity:"error"})}};return u.useEffect(()=>{S()},[]),e.jsxs(e.Fragment,{children:[n&&e.jsx(Ft,{setSnackbar:p,closeModal:()=>{s(!1),S()}}),e.jsxs("section",{className:"flex justify-between items-center",children:[e.jsx(U,{onClick:()=>s(!0),variant:"contained",sx:{fontSize:11},startIcon:e.jsx(ae,{}),children:"Add New Problem"}),e.jsxs("div",{className:"flex gap-4 mt-5 items-center",children:[f?e.jsx(Xe,{size:24}):e.jsxs(Qe,{variant:"standard",value:g,onChange:l=>h(l.target.value),displayEmpty:!0,sx:{minWidth:250},children:[e.jsx(pe,{value:"",disabled:!0,children:"Select Problem"}),d.map(l=>e.jsx(pe,{value:l._id,children:l.title},l._id))]}),e.jsx(U,{onClick:k,variant:"contained",color:"primary",sx:{fontSize:9},disabled:!g,children:"Add to Section"})]})]}),e.jsx(we,{open:c.open,autoHideDuration:4e3,onClose:()=>p({...c,open:!1}),children:e.jsx(Ce,{onClose:()=>p({...c,open:!1}),severity:c.severity,variant:"filled",children:c.message})})]})}const Dt=Fe.lazy(()=>Be(()=>import("./AddSectionModal-DMJFYRC5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function fs(){var w,b,j;const{id:t}=$e(),[o,n]=u.useState(null),[s,d]=u.useState(),[m,g]=u.useState(!1),[h,f]=u.useState({name:"",duration:"",isAvailable:!1}),[x,c]=u.useState(!1),[p,S]=u.useState({open:!1,message:"",severity:"success"}),k=a=>{const{name:C,value:r,type:i,checked:v}=a.target,P=i==="checkbox"?v:r;f(N=>({...N,[C]:P}))},l=()=>{S(a=>({...a,open:!1}))},y=async a=>{var C,r;a.preventDefault(),c(!0);try{const i=await q.post(`${H}/api/v2/test/edit/${t}`,h,{withCredentials:!0});S({open:!0,message:"Test updated successfully!",severity:"success"})}catch(i){const v=((r=(C=i.response)==null?void 0:C.data)==null?void 0:r.message)||"Failed to update test.";S({open:!0,message:v,severity:"error"})}finally{c(!1)}};return u.useEffect(()=>{q.get(`${H}/api/v2/test/${t}`,{withCredentials:!0}).then(a=>{var C;n(a.data),d((C=a.data)==null?void 0:C.sections[0]),f({name:a.data.name||"",duration:parseInt(a.data.duration)||0,isAvailable:a.data.isAvailable||!1})}).catch(a=>console.log(a))},[t]),e.jsxs("div",{className:"b",children:[e.jsxs("main",{className:"flex gap-4",children:[e.jsxs("form",{onSubmit:y,className:"flex-1 border rounded-lg items-center py-3 grid grid-cols-1 space-y-3 shadow-lg font-sans  p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test id : "}),e.jsx("input",{className:"custominput",type:"text",value:o==null?void 0:o._id,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test name : "}),e.jsx("input",{className:"custominput",type:"text",name:"name",value:h==null?void 0:h.name,onChange:k})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test duration : "}),e.jsx("input",{className:"custominput",type:"text",name:"duration",onChange:k,value:h.duration})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test decription : "}),e.jsx("input",{className:"custominput",type:"text",value:o==null?void 0:o.description,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Is Available "}),e.jsx("input",{className:"",type:"checkbox",name:"isAvailable",onChange:k,checked:h.isAvailable})]}),e.jsx(U,{type:"submit",sx:{fontSize:11,width:"100px"},variant:"contained",children:"Update"})]}),e.jsxs("section",{className:"flex-[0.7] justify-start border flex-col rounded-lg items-center py-3 flex gap-4 shadow-lg font-sans  p-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full p-2 bg-white shadow-md rounded-md",children:(w=o==null?void 0:o.sections)==null?void 0:w.map((a,C)=>e.jsx("div",{className:"w-full",children:e.jsx(U,{fullWidth:!0,onClick:()=>d(a),sx:{justifyContent:"flex-start",fontSize:12,textTransform:"none",backgroundColor:a._id===(s==null?void 0:s._id)?"#333":"#FFA500",color:a._id===(s==null?void 0:s._id)?"#fff":"#000","&:hover":{backgroundColor:a._id===(s==null?void 0:s._id)?"#111":"#e69500"},borderRadius:"8px",padding:"6px 12px"},variant:"contained",children:a.name})},a._id))}),e.jsx(je,{title:"Add section",children:e.jsx(re,{onClick:()=>{g(!0)},color:"primary",focusRipple:!0,children:e.jsx(ae,{})})})]})]}),e.jsxs("section",{className:"mt-4",children:[s&&(s==null?void 0:s.sectionType)=="Quiz"&&e.jsx($t,{setCurrSection:d,setCurrTest:n,setSnackbar:S,sectionId:s==null?void 0:s._id,testId:t}),s&&(s==null?void 0:s.sectionType)=="Coding"&&e.jsx(e.Fragment,{children:e.jsx(Bt,{testId:t,sectionId:s==null?void 0:s._id})})]}),t&&m&&e.jsx(u.Suspense,{fallback:e.jsx("div",{children:e.jsx("div",{className:"loader"})}),children:e.jsx(Dt,{closeModal:()=>{g(!1)},testId:t})}),e.jsxs("section",{className:"mt-4",children:[(b=s==null?void 0:s.questionSet)==null?void 0:b.map((a,C)=>e.jsxs(me,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:C+1+". "}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Question"}),e.jsx("input",{type:"text",className:"custominput",value:a.question,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Marks"}),e.jsx("input",{type:"number",className:"custominput ",value:a.negative,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Negative"}),e.jsx("input",{type:"number",className:"custominput ",value:a.marks,name:"",id:""})]})]})}),e.jsx(xe,{children:a.answerOptions.map((r,i)=>e.jsxs("div",{className:"flex mb-1 gap-3 items-center",children:[e.jsxs("p",{className:"text-xs text-nowrap",children:["Option ",i+1]}),e.jsx("input",{style:{width:"300px"},type:"text",className:"custominput w-[100px]",value:r.text,name:"",id:""}),e.jsx("input",{type:"checkbox",checked:r.isCorrect,placeholder:"isCorrect",name:"",id:""})]}))})]})),(j=s==null?void 0:s.problemset)==null?void 0:j.map((a,C)=>e.jsxs(me,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:C+1+". "}),e.jsx("p",{children:a.title})]})}),e.jsx(xe,{children:e.jsx(e.Fragment,{children:e.jsx("p",{children:a.description})})})]}))]}),e.jsx(we,{open:p.open,autoHideDuration:3e3,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Ce,{onClose:l,severity:p.severity,sx:{width:"100%"},children:p.message})})]})}export{fs as default};
