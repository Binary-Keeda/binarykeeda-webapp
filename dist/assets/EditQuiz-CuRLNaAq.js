const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ExcelModal-Bmb2PkGA.js","assets/index-BO880UDm.js","assets/index-YBA9VOP4.css","assets/index-Cc8QKxNy.js","assets/index-Chjiymov.js","assets/IconButton-XmvcqOIy.js","assets/CircularProgress-DgyyXpUr.js","assets/Close-BNY08pWz.js","assets/createSvgIcon-C7bB0SuN.js","assets/Button-TXCx0WR2.js"])))=>i.map(i=>d[i]);
import{j as e,c as I,r as x,e as z,a as y,B as w,_ as T}from"./index-BO880UDm.js";import{C as E}from"./CircularProgress-DgyyXpUr.js";import{B as v}from"./Button-TXCx0WR2.js";import{c as M}from"./createSvgIcon-C7bB0SuN.js";import{A as Q,a as F,b as _}from"./AccordionSummary-C920_8Zs.js";import{I as L}from"./IconButton-XmvcqOIy.js";import{A as O}from"./ArrowDropDown-VqC9qHkO.js";import{T as j}from"./TextField-Df_Qnreo.js";import{F as H,I as $,S as R}from"./Select-CgTBSUX1.js";import{M as q}from"./MenuItem-CzWUkohb.js";import{A as U}from"./Add-D20xnrZk.js";import"./Portal-DVCdK67x.js";import"./index-iipaoruI.js";import"./Modal-CexqlRwf.js";import"./Menu-Bby7DKpS.js";import"./index-Dyaj_eaP.js";import"./dividerClasses-B0CDf_Rv.js";const P=M(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"}),"Cloud"),V=M(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),S=M(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile"),B=c=>{let m=0;for(let r=0;r<c.length;r++)m+=parseInt(c[r].marks);return m},J=x.lazy(()=>T(()=>import("./ExcelModal-Bmb2PkGA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));function xe(){const{data:c}=I(t=>t.quiz),[m,r]=x.useState(!0),[s,i]=x.useState(null),{id:g}=z(),[d,p]=x.useState(!1),[f,b]=x.useState(0),[h,N]=x.useState(0),[C,k]=x.useState({quizId:g,question:"",image:"",marks:0,category:"",answer:"",negative:0,options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]}),l=async()=>{try{const t=await y.get(`${w}/api/v1/quiz/${g}`);t.data&&i(t.data)}catch(t){console.log(t)}};x.useEffect(()=>{l()},[]),x.useEffect(()=>{N(s==null?void 0:s.marks),b(B(s?s.questions:[]))},[s]);const a=async t=>{y.get(`${w}/api/v1//quiz/question/del/?quizId=${s._id}&questionId=${t}`).then(o=>{window.location.reload()}).catch(o=>{console.log(o)})};return e.jsxs("section",{className:"flex flex-col gap-5",children:[s==null?e.jsx("div",{className:"h-screen w-screen fixed justify-center flex items-center bg-opacity-20 bg-black left-0 top-0 z-[2999] ",children:e.jsx(E,{size:"27px"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex shadow-sm rounded-md bg-white p-5 justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("i",{className:"text-sm",children:s.isAvailable?"Available":"Currently Not Available"})," ",e.jsxs("i",{children:["Current Marks : ",f," / ",h]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(v,{onClick:()=>r(!1),variant:"outlined",children:["Upload Excel ",e.jsx(P,{sx:{marginLeft:"10px"}})]}),e.jsxs(v,{onClick:()=>p(!d),variant:"contained",children:["Upload JSON ",e.jsx(S,{sx:{marginLeft:"10px"}})]})]})]}),e.jsx(G,{data:s})]}),e.jsx(W,{setCurrentMarks:b,maxMarks:h,currentMarks:f,formData:C,setFormData:k}),e.jsx("section",{className:"p-5 bg-white flex-col flex gap-1",children:(s==null?void 0:s.questions.length)!=0?s==null?void 0:s.questions.map((t,o)=>e.jsx("div",{className:"",children:e.jsxs(Q,{className:"",children:[e.jsx(F,{expandIcon:e.jsx(O,{}),sx:{display:"flex",flexDirection:"row-reverse",alignItems:"center"},children:e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsxs("h1",{className:"flex gap-1 text-sm",children:["Question ",o+1,e.jsxs("p",{className:"ml-2",children:[" ",t.question]})]}),e.jsxs("div",{className:"flex relative w-24 justify-end gap-5",children:[e.jsx(L,{onClick:()=>{a(t._id)},children:e.jsx(V,{className:"absolute left-0 z-40",sx:{color:"gray"}})}),e.jsx("small",{children:e.jsxs("i",{children:[t.marks+" "," Marks"]})})]})]})}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex flex-col text-sm px-5",children:[e.jsxs("h1",{className:"flex gap-1 text-sm",children:["Type : ",t.category]}),t.image&&e.jsx("div",{className:"flex justify-start",children:e.jsx("img",{className:"my-2 h-[100px] object-contain",src:t.image})}),t.category=="Text"&&e.jsx(j,{disabled:!0,label:"Answer",value:t.answer,variant:"standard"}),t.category=="MCQ"&&e.jsx(e.Fragment,{children:t.options.map((u,n)=>e.jsxs("div",{className:"flex gap-2 text-sm items-center",children:[e.jsxs("h1",{className:"flex gap-1 text-sm",children:["Option ",n+1,"."]}),e.jsx("h1",{className:"flex gap-1 text-sm",children:u.text}),e.jsx("input",{type:"radio",checked:u.isCorrect,id:""}),"Is Correct"]},n))})]}),e.jsx("div",{className:"flex mt-1 justify-end",children:e.jsx(v,{variant:"contained",children:"Save"})})]})]})},o)):e.jsx("small",{children:"No Questions to display"})}),!m&&e.jsx(x.Suspense,{fallback:e.jsx("div",{children:e.jsx("div",{className:"loader"})}),children:e.jsx(J,{id:g,setModalClose:r})})]})}const W=({onSubmit:c,setCurrentMarks:m,currentMarks:r,formData:s,setFormData:i,maxMarks:g})=>{const[d,p]=x.useState(""),[f,b]=x.useState(""),h=l=>{const{name:a,value:t,type:o,files:u}=l.target;if(a==="marks"&&t){const n=parseInt(t)-parseInt(s.marks||0);m(A=>A+n)}else t||m(n=>n-parseInt(s.marks||0));if(o==="file"&&u.length>0){const n=u[0];i({...s,[a]:n}),p(URL.createObjectURL(n))}else a=="marks"?i({...s,[a]:parseInt(t)}):i({...s,[a]:t})},N=()=>{const{marks:l,question:a,category:t}=s;return!a||!t||!(l&&l<=g)?(alert("Please ensure all fields are valid and marks do not exceed maxMarks."),!1):!0},C=async l=>{l.preventDefault(),b(!0);const a=new FormData;if(a.append("image",s.image),a.append("data",JSON.stringify({quizId:s.quizId,question:s.question,marks:s.marks,category:s.category,answer:s.answer,options:s.options,negative:s.negative})),N())try{console.log(s),await y.post(`${w}/api/v1/quiz/add/question`,a,{headers:{"Content-Type":"multipart/form-data"}}),console.log(a.entries()),window.location.reload()}catch(t){console.log(t.message)}b(!1)},k=()=>{const l=document.getElementById("preview-image");l.requestFullscreen?l.requestFullscreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen():l.msRequestFullscreen&&l.msRequestFullscreen()};return e.jsxs("form",{className:"items-center space-y-3 p-5 bg-white",onSubmit:C,children:[e.jsxs("div",{className:"items-center flex-wrap gap-3 min-h-10 flex",children:[e.jsx(j,{onChange:h,name:"quizId",value:s.quizId,variant:"standard",label:"Quiz ID",disabled:!0,required:!0}),e.jsx(j,{rows:2,multiline:!0,onChange:h,value:s.question,name:"question",sx:{width:340},variant:"standard",label:"Question text",required:!0}),e.jsxs(H,{variant:"standard",sx:{m:1,minWidth:120},children:[e.jsx($,{children:"Category"}),e.jsxs(R,{value:s.category,onChange:h,name:"category",variant:"standard",required:!0,children:[e.jsx(q,{value:"MCQ",children:"MCQ"}),e.jsx(q,{value:"MSQ",children:"MSQ"}),e.jsx(q,{value:"Text",children:"Text"})]})]}),e.jsx(j,{name:"negative",type:"number",value:s.negative,onChange:l=>i({...s,[l.target.name]:parseInt(l.target.value)}),sx:{width:140},variant:"standard",label:"Negative",required:!0}),s.category==="Text"&&e.jsx(j,{onChange:h,value:s.answer,name:"answer",type:"text",variant:"standard",label:"Answer",required:!0}),e.jsx(j,{min:"1",onChange:h,value:s.marks,name:"marks",error:g<r,type:"number",variant:"standard",label:"Marks",required:!0}),e.jsxs(v,{type:"button",className:"relative w-28",variant:"contained",children:[e.jsx("input",{name:"image",type:"file",className:"opacity-0 absolute",onChange:h}),e.jsx(S,{})]}),d&&e.jsx("img",{id:"preview-image",onClick:k,className:"h-44",src:d,alt:"Preview"})]}),e.jsx("div",{className:"flex flex-col gap-3 p-2",children:(s.category=="MCQ"||s.category=="MSQ")&&s.options.map((l,a)=>{var t;return e.jsxs("div",{className:"items-center flex gap-2",children:[e.jsx("h1",{className:"text-gray-900 font-semibold",children:`Option ${a+1}`}),e.jsx("div",{className:"w-full max-w-sm min-w-[200px]",children:e.jsx("input",{required:!0,name:`option-${a}`,className:"inputOption",placeholder:"Type here...",value:l.text,onChange:o=>i(u=>{const n=[...u.options];return n[a].text=o.target.value,{...u,options:n}})})}),s.category=="MCQ"?e.jsx(e.Fragment,{children:e.jsx("input",{type:"radio",required:!0,className:"correctOption",name:"correctOption",checked:l.isCorrect,onChange:()=>i(o=>({...o,options:o.options.map((u,n)=>({...u,isCorrect:n===a}))}))})}):e.jsxs(e.Fragment,{children:[" ",e.jsx("input",{type:"checkbox",onChange:o=>{i(u=>{const n=[...u.options];return n[a].isCorrect=o.target.checked,{...u,options:n}})},checked:((t=s.options[a])==null?void 0:t.isChecked)||!1,name:"",id:""})]})," ","Is Correct"]},a)})}),e.jsxs(v,{type:"submit",variant:"contained",color:"primary",children:["Add Question ",e.jsx(U,{})]}),f&&e.jsx(LoadingModal,{})]})},G=({data:c})=>{const{user:m}=I(d=>d.auth),[r,s]=x.useState({title:c.title,creator:m._id,duration:c.duration,questions:c.questions,marks:c.marks,category:c.category,difficulty:c.difficulty,isAvailable:c.isAvailable}),i=d=>{const{name:p,value:f}=d.target;s({...r,[p]:p==="marks"||p==="duration"?parseInt(f):f})},g=async d=>{d.preventDefault();try{await y.post(`${w}/api/v1/quiz/edit/${c._id}`,r),window.location.reload()}catch(p){console.error(p)}};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"p-5 bg-white",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"Edit Quiz"}),e.jsxs("form",{onSubmit:g,className:"",children:[e.jsxs("div",{className:"mb-5 grid grid-cols-1 sm:grid-cols-3 gap-5",children:[e.jsxs("div",{class:"w-full max-w-sm min-w-[200px]",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Creator"}),e.jsx("input",{readOnly:!0,type:"text",value:m._id,class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Type here..."})]}),e.jsxs("div",{class:"w-full max-w-sm min-w-[200px]",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Title"}),e.jsx("input",{type:"text",value:r.title,onChange:i,name:"title",class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Type here..."})]}),e.jsxs("div",{class:"w-full max-w-sm min-w-[200px]",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Marks"}),e.jsx("input",{type:"number",min:0,value:r.marks,onChange:i,name:"marks",class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Type here..."})]}),e.jsxs("div",{class:"w-full max-w-sm min-w-[200px]",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Duration"}),e.jsx("input",{type:"number",min:0,value:r.duration,onChange:i,name:"duration",class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Type here..."})]}),e.jsxs("div",{className:"w-full max-w-sm min-w-[200px]",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold",children:"Category"}),e.jsxs("select",{class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Type here...",name:"category",value:r.category,onChange:i,children:[e.jsx("option",{value:"Aptitude",children:"Aptitude"}),e.jsx("option",{value:"Core",children:"Core"}),e.jsx("option",{value:"Miscellaneous",children:"Miscellaneous"})]})]}),e.jsxs("div",{className:"text-xs  font-semibold min-w-[200px] max-w-sm ",children:[e.jsx("label",{className:"text-xs ml-1 font-semibold min-w-[200px] max-w-sm ",children:"Difficulty"}),e.jsxs("select",{class:"w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-200 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow",placeholder:"Type here...",name:"difficulty",value:r.difficulty,onChange:i,children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("label",{className:"text-xs font-semibold",children:"Is Available"}),e.jsx("input",{className:"",type:"checkbox",checked:r.isAvailable,onChange:d=>{s({...r,[d.target.name]:!!d.target.checked})},name:"isAvailable"})]})]}),e.jsx(v,{type:"submit",variant:"contained",color:"primary",sx:{color:"#f1f1f1",fontWeight:"bold"},children:"Update Quiz"})]})]})})};export{xe as default};
