const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddSectionModal-C-MctgbY.js","assets/index-DfoLIEly.js","assets/index-B4c4LBi5.css","assets/IconButton-Cmfj4T6-.js","assets/createSimplePaletteValueFilter-Buu2TBus.js","assets/CircularProgress-l7MGT7BE.js","assets/Close-BLTUEH2G.js","assets/createSvgIcon-DZiSbIQ0.js"])))=>i.map(i=>d[i]);
import{j as e,r as u,a as q,B as H,e as Le,t as $e,_ as Fe}from"./index-DfoLIEly.js";import{P as ne,G as Be}from"./Menu-CAI6arpy.js";import{T as De}from"./Typography-C1tmIDyz.js";import{T as V}from"./TextField-DJslImeR.js";import{a as X,g as Z,b as K,c as R,d as oe,e as M,f as J,m as Q,k as le,l as ce,j as W,r as qe,u as se,v as ye,h as de,w as He,x as _e}from"./createSimplePaletteValueFilter-Buu2TBus.js";import{S as We}from"./SwitchBase-OTFeabUL.js";import{c as _}from"./createSvgIcon-DZiSbIQ0.js";import{u as Ue,S as Qe}from"./Select-Cov1IFwh.js";import{u as T,g as Ge,b as te,e as ue,a as Ve}from"./Portal-Buz8h6Ty.js";import{c as Xe}from"./Modal-n1uAGa0H.js";import{T as je}from"./Tooltip-sJEekQrx.js";import{B as U}from"./Button-DoH6hskA.js";import{A as ae}from"./Add-DJtYJpXy.js";import{d as Ze}from"./index-BpxXb0Nt.js";import{C as Ke}from"./CircularProgress-l7MGT7BE.js";import{M as pe}from"./MenuItem-CmgF3zFD.js";import{C as Je}from"./Close-D5thHAbH.js";import{I as re}from"./IconButton-Cmfj4T6-.js";import{C as Ye}from"./Close-BLTUEH2G.js";import{A as me,a as fe,b as xe}from"./AccordionSummary-p5ypWTe7.js";import"./index-yT0BVxAl.js";import"./index-et6kIqBB.js";import"./Popper-nsPshs8j.js";import"./dividerClasses-DYAduvT_.js";function et(t){return Z("MuiAlert",t)}const ge=X("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),tt=_(e.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),st=_(e.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),nt=_(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),ot=_(e.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),at=t=>{const{variant:n,color:o,severity:s,classes:d}=t,m={root:["root",`color${M(o||s)}`,`${n}${M(o||s)}`,`${n}`],icon:["icon"],message:["message"],action:["action"]};return J(m,et,d)},rt=R(ne,{name:"MuiAlert",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,n[o.variant],n[`${o.variant}${M(o.color||o.severity)}`]]}})(Q(({theme:t})=>{const n=t.palette.mode==="light"?le:ce,o=t.palette.mode==="light"?ce:le;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(W(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:n(t.palette[s].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${s}StandardBg`]:o(t.palette[s].light,.9),[`& .${ge.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(W(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${s}Color`]:n(t.palette[s].light,.6),border:`1px solid ${(t.vars||t).palette[s].light}`,[`& .${ge.icon}`]:t.vars?{color:t.vars.palette.Alert[`${s}IconColor`]}:{color:t.palette[s].main}}})),...Object.entries(t.palette).filter(W(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${s}FilledColor`],backgroundColor:t.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[s].dark:t.palette[s].main,color:t.palette.getContrastText(t.palette[s].main)}}}))]}})),it=R("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,n)=>n.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),lt=R("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,n)=>n.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),ct=R("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,n)=>n.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),he={success:e.jsx(tt,{fontSize:"inherit"}),warning:e.jsx(st,{fontSize:"inherit"}),error:e.jsx(nt,{fontSize:"inherit"}),info:e.jsx(ot,{fontSize:"inherit"})},Ce=u.forwardRef(function(n,o){const s=K({props:n,name:"MuiAlert"}),{action:d,children:m,className:g,closeText:h="Close",color:f,components:x={},componentsProps:c={},icon:p,iconMapping:S=he,onClose:k,role:l="alert",severity:y="success",slotProps:w={},slots:v={},variant:j="standard",...a}=s,C={...s,color:f,severity:y,variant:j,colorSeverity:f||y},r=at(C),i={slots:{closeButton:x.CloseButton,closeIcon:x.CloseIcon,...v},slotProps:{...c,...w}},[b,P]=T("root",{ref:o,shouldForwardComponentProp:!0,className:oe(r.root,g),elementType:rt,externalForwardedProps:{...i,...a},ownerState:C,additionalProps:{role:l,elevation:0}}),[N,I]=T("icon",{className:r.icon,elementType:it,externalForwardedProps:i,ownerState:C}),[F,B]=T("message",{className:r.message,elementType:lt,externalForwardedProps:i,ownerState:C}),[O,$]=T("action",{className:r.action,elementType:ct,externalForwardedProps:i,ownerState:C}),[E,D]=T("closeButton",{elementType:re,externalForwardedProps:i,ownerState:C}),[Y,ee]=T("closeIcon",{elementType:Je,externalForwardedProps:i,ownerState:C});return e.jsxs(b,{...P,children:[p!==!1?e.jsx(N,{...I,children:p||S[y]||he[y]}):null,e.jsx(F,{...B,children:m}),d!=null?e.jsx(O,{...$,children:d}):null,d==null&&k?e.jsx(O,{...$,children:e.jsx(E,{size:"small","aria-label":h,title:h,color:"inherit",onClick:k,...D,children:e.jsx(Y,{fontSize:"small",...ee})})}):null]})});function ve(t){return t.substring(2).toLowerCase()}function dt(t,n){return n.documentElement.clientWidth<t.clientX||n.documentElement.clientHeight<t.clientY}function ut(t){const{children:n,disableReactTree:o=!1,mouseEvent:s="onClick",onClickAway:d,touchEvent:m="onTouchEnd"}=t,g=u.useRef(!1),h=u.useRef(null),f=u.useRef(!1),x=u.useRef(!1);u.useEffect(()=>(setTimeout(()=>{f.current=!0},0),()=>{f.current=!1}),[]);const c=qe(Ge(n),h),p=se(l=>{const y=x.current;x.current=!1;const w=te(h.current);if(!f.current||!h.current||"clientX"in l&&dt(l,w))return;if(g.current){g.current=!1;return}let v;l.composedPath?v=l.composedPath().includes(h.current):v=!w.documentElement.contains(l.target)||h.current.contains(l.target),!v&&(o||!y)&&d(l)}),S=l=>y=>{x.current=!0;const w=n.props[l];w&&w(y)},k={ref:c};return m!==!1&&(k[m]=S(m)),u.useEffect(()=>{if(m!==!1){const l=ve(m),y=te(h.current),w=()=>{g.current=!0};return y.addEventListener(l,p),y.addEventListener("touchmove",w),()=>{y.removeEventListener(l,p),y.removeEventListener("touchmove",w)}}},[p,m]),s!==!1&&(k[s]=S(s)),u.useEffect(()=>{if(s!==!1){const l=ve(s),y=te(h.current);return y.addEventListener(l,p),()=>{y.removeEventListener(l,p)}}},[p,s]),u.cloneElement(n,k)}const pt=_(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),mt=_(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),ft=R("span",{shouldForwardProp:ye})({position:"relative",display:"flex"}),xt=R(pt)({transform:"scale(1)"}),gt=R(mt)(Q(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function Se(t){const{checked:n=!1,classes:o={},fontSize:s}=t,d={...t,checked:n};return e.jsxs(ft,{className:o.root,ownerState:d,children:[e.jsx(xt,{fontSize:s,className:o.background,ownerState:d}),e.jsx(gt,{fontSize:s,className:o.dot,ownerState:d})]})}const ht=u.createContext(void 0);function vt(){return u.useContext(ht)}function bt(t){return Z("MuiRadio",t)}const be=X("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),yt=t=>{const{classes:n,color:o,size:s}=t,d={root:["root",`color${M(o)}`,s!=="medium"&&`size${M(s)}`]};return{...n,...J(d,bt,n)}},jt=R(We,{shouldForwardProp:t=>ye(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,o.size!=="medium"&&n[`size${M(o.size)}`],n[`color${M(o.color)}`]]}})(Q(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${be.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:de(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(W()).map(([n])=>({props:{color:n,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:de(t.palette[n].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(W()).map(([n])=>({props:{color:n,disabled:!1},style:{[`&.${be.checked}`]:{color:(t.vars||t).palette[n].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Ct(t,n){return typeof n=="object"&&n!==null?t===n:String(t)===String(n)}const St=e.jsx(Se,{checked:!0}),wt=e.jsx(Se,{}),kt=u.forwardRef(function(n,o){const s=K({props:n,name:"MuiRadio"}),{checked:d,checkedIcon:m=St,color:g="primary",icon:h=wt,name:f,onChange:x,size:c="medium",className:p,disabled:S,disableRipple:k=!1,slots:l={},slotProps:y={},inputProps:w,...v}=s,j=Ue();let a=S;j&&typeof a>"u"&&(a=j.disabled),a??(a=!1);const C={...s,disabled:a,disableRipple:k,color:g,size:c},r=yt(C),i=vt();let b=d;const P=Xe(x,i&&i.onChange);let N=f;i&&(typeof b>"u"&&(b=Ct(i.value,s.value)),typeof N>"u"&&(N=i.name));const I=y.input??w,[F,B]=T("root",{ref:o,elementType:jt,className:oe(r.root,p),shouldForwardComponentProp:!0,externalForwardedProps:{slots:l,slotProps:y,...v},getSlotProps:O=>({...O,onChange:($,...E)=>{var D;(D=O.onChange)==null||D.call(O,$,...E),P($,...E)}}),ownerState:C,additionalProps:{type:"radio",icon:u.cloneElement(h,{fontSize:h.props.fontSize??c}),checkedIcon:u.cloneElement(m,{fontSize:m.props.fontSize??c}),disabled:a,name:N,checked:b,slots:l,slotProps:{input:typeof I=="function"?I(C):I}}});return e.jsx(F,{...B,classes:r})});function Nt(t={}){const{autoHideDuration:n=null,disableWindowBlurListener:o=!1,onClose:s,open:d,resumeHideDuration:m}=t,g=He();u.useEffect(()=>{if(!d)return;function v(j){j.defaultPrevented||j.key==="Escape"&&(s==null||s(j,"escapeKeyDown"))}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[d,s]);const h=se((v,j)=>{s==null||s(v,j)}),f=se(v=>{!s||v==null||g.start(v,()=>{h(null,"timeout")})});u.useEffect(()=>(d&&f(n),g.clear),[d,n,f,g]);const x=v=>{s==null||s(v,"clickaway")},c=g.clear,p=u.useCallback(()=>{n!=null&&f(m??n*.5)},[n,m,f]),S=v=>j=>{const a=v.onBlur;a==null||a(j),p()},k=v=>j=>{const a=v.onFocus;a==null||a(j),c()},l=v=>j=>{const a=v.onMouseEnter;a==null||a(j),c()},y=v=>j=>{const a=v.onMouseLeave;a==null||a(j),p()};return u.useEffect(()=>{if(!o&&d)return window.addEventListener("focus",p),window.addEventListener("blur",c),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",c)}},[o,d,p,c]),{getRootProps:(v={})=>{const j={...ue(t),...ue(v)};return{role:"presentation",...v,...j,onBlur:S(j),onFocus:k(j),onMouseEnter:l(j),onMouseLeave:y(j)}},onClickAway:x}}function Pt(t){return Z("MuiSnackbarContent",t)}X("MuiSnackbarContent",["root","message","action"]);const At=t=>{const{classes:n}=t;return J({root:["root"],action:["action"],message:["message"]},Pt,n)},Rt=R(ne,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,n)=>n.root})(Q(({theme:t})=>{const n=t.palette.mode==="light"?.8:.98,o=_e(t.palette.background.default,n);return{...t.typography.body2,color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(o),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:o,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Et=R("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,n)=>n.message})({padding:"8px 0"}),Tt=R("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,n)=>n.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Mt=u.forwardRef(function(n,o){const s=K({props:n,name:"MuiSnackbarContent"}),{action:d,className:m,message:g,role:h="alert",...f}=s,x=s,c=At(x);return e.jsxs(Rt,{role:h,square:!0,elevation:6,className:oe(c.root,m),ownerState:x,ref:o,...f,children:[e.jsx(Et,{className:c.message,ownerState:x,children:g}),d?e.jsx(Tt,{className:c.action,ownerState:x,children:d}):null]})});function It(t){return Z("MuiSnackbar",t)}X("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const zt=t=>{const{classes:n,anchorOrigin:o}=t,s={root:["root",`anchorOrigin${M(o.vertical)}${M(o.horizontal)}`]};return J(s,It,n)},Ot=R("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,n[`anchorOrigin${M(o.anchorOrigin.vertical)}${M(o.anchorOrigin.horizontal)}`]]}})(Q(({theme:t})=>({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:n})=>n.anchorOrigin.vertical==="top",style:{top:8,[t.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:n})=>n.anchorOrigin.vertical!=="top",style:{bottom:8,[t.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[t.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[t.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:n})=>n.anchorOrigin.horizontal==="center",style:{[t.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),we=u.forwardRef(function(n,o){const s=K({props:n,name:"MuiSnackbar"}),d=Ve(),m={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{action:g,anchorOrigin:{vertical:h,horizontal:f}={vertical:"bottom",horizontal:"left"},autoHideDuration:x=null,children:c,className:p,ClickAwayListenerProps:S,ContentProps:k,disableWindowBlurListener:l=!1,message:y,onBlur:w,onClose:v,onFocus:j,onMouseEnter:a,onMouseLeave:C,open:r,resumeHideDuration:i,slots:b={},slotProps:P={},TransitionComponent:N,transitionDuration:I=m,TransitionProps:{onEnter:F,onExited:B,...O}={},...$}=s,E={...s,anchorOrigin:{vertical:h,horizontal:f},autoHideDuration:x,disableWindowBlurListener:l,TransitionComponent:N,transitionDuration:I},D=zt(E),{getRootProps:Y,onClickAway:ee}=Nt({...E}),[ke,ie]=u.useState(!0),Ne=A=>{ie(!0),B&&B(A)},Pe=(A,z)=>{ie(!1),F&&F(A,z)},G={slots:{transition:N,...b},slotProps:{content:k,clickAwayListener:S,transition:O,...P}},[Ae,Re]=T("root",{ref:o,className:[D.root,p],elementType:Ot,getSlotProps:Y,externalForwardedProps:{...G,...$},ownerState:E}),[Ee,Te]=T("clickAwayListener",{elementType:ut,externalForwardedProps:G,getSlotProps:A=>({onClickAway:(...z)=>{var L;(L=A.onClickAway)==null||L.call(A,...z),ee(...z)}}),ownerState:E}),[Me,Ie]=T("content",{elementType:Mt,shouldForwardComponentProp:!0,externalForwardedProps:G,additionalProps:{message:y,action:g},ownerState:E}),[ze,Oe]=T("transition",{elementType:Be,externalForwardedProps:G,getSlotProps:A=>({onEnter:(...z)=>{var L;(L=A.onEnter)==null||L.call(A,...z),Pe(...z)},onExited:(...z)=>{var L;(L=A.onExited)==null||L.call(A,...z),Ne(...z)}}),additionalProps:{appear:!0,in:r,timeout:I,direction:h==="top"?"down":"up"},ownerState:E});return!r&&ke?null:e.jsx(Ee,{...Te,children:e.jsx(Ae,{...Re,children:e.jsx(ze,{...Oe,children:c||e.jsx(Me,{...Ie})})})})});function Lt({setCurrTest:t,setCurrSection:n,setSnackbar:o,sectionId:s,testId:d}){const[m,g]=u.useState({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]}),h=async f=>{f.preventDefault();try{const x=await q.post(`${H}/api/v2/test/${d}/section/${s}/add-question`,m,{withCredentials:!0});n(c=>({...c,questionSet:[...(c==null?void 0:c.questionSet)||[],m]})),o({open:!0,message:"Question added!",severity:"success"}),g({question:"",marks:0,negative:0,answerOptions:[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})}catch(x){console.error(x),o({open:!0,message:"Failed to add question",severity:"error"})}};return e.jsxs(ne,{elevation:1,className:"p-4 space-y-4",children:[e.jsx(De,{variant:"subtitle1",sx:{fontWeight:600},children:"Add Question"}),e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsx(V,{fullWidth:!0,label:"Question",size:"small",variant:"outlined",value:m.question,onChange:f=>g(x=>({...x,question:f.target.value})),required:!0}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.answerOptions.map((f,x)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kt,{size:"small",checked:f.isCorrect,onChange:()=>{const c=m.answerOptions.map((p,S)=>({...p,isCorrect:S===x}));g(p=>({...p,answerOptions:c}))}}),e.jsx(V,{label:`Option ${String.fromCharCode(65+x)}`,size:"small",fullWidth:!0,variant:"standard",value:f.text,onChange:c=>{const p=[...m.answerOptions];p[x].text=c.target.value,g(S=>({...S,answerOptions:p}))},required:!0})]},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{label:"Marks",type:"number",size:"small",value:m.marks,onChange:f=>g(x=>({...x,marks:parseFloat(f.target.value)})),required:!0}),e.jsx(V,{label:"Negative",type:"number",size:"small",value:m.negative,onChange:f=>g(x=>({...x,negative:parseFloat(f.target.value)})),required:!0})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(je,{title:"Add question",children:e.jsx(U,{type:"submit",variant:"contained",size:"small",endIcon:e.jsx(ae,{sx:{fontSize:16}}),sx:{fontSize:12,textTransform:"none"},children:"Add"})})})]})]})}const $t=({closeModal:t,setSnackbar:n})=>{const[o,s]=u.useState({title:"",description:"",difficulty:"Easy"}),[d,m]=u.useState([{input:"",output:"",explanation:""}]),[g,h]=u.useState([{input:"",output:""}]),[f,x]=u.useState([]),[c,p]=u.useState("python"),[S,k]=u.useState(""),l=r=>{const{name:i,value:b}=r.target;s(P=>({...P,[i]:b}))},y=(r,i,b,P=!1)=>{if(P){const N=[...d];N[r][i]=b,m(N)}else{const N=[...g];N[r][i]=b,h(N)}},w=(r=!1)=>{const i=r?{input:"",output:"",explanation:""}:{input:"",output:""};r?m([...d,i]):h([...g,i])},v=(r,i=!1)=>{if(i){const b=[...d];b.splice(r,1),m(b)}else{const b=[...g];b.splice(r,1),h(b)}},j=()=>{if(f.some(r=>r.language===c)){alert(`Signature for ${c} already exists`);return}if(!S.trim()){alert("Function signature cannot be empty");return}x([...f,{language:c,signature:S}]),k("")},a=r=>{const i=[...f];i.splice(r,1),x(i)},C=async r=>{var b,P;r.preventDefault();const i={title:o.title.trim(),description:o.description.trim(),difficulty:o.difficulty,sampleTestCases:d,testCases:g,functionSignatures:f};try{const N=await q.post(`${H}/api/v2/test/problem/add`,i,{withCredentials:!0});n({open:!0,message:N.data.message||"Problem added successfully!",severity:"success"}),s({title:"",description:"",difficulty:"Easy"}),m([{input:"",output:"",explanation:""}]),h([{input:"",output:""}]),x([]),t()}catch(N){console.error("Error submitting problem:",N);const I=((P=(b=N.response)==null?void 0:b.data)==null?void 0:P.message)||"Failed to add problem. Please try again later.";n({open:!0,message:I,severity:"error"})}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-30",children:e.jsxs("div",{className:"flex flex-col max-w-4xl mx-auto p-6 mt-12 bg-white shadow-lg rounded-lg",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(re,{sx:{bgcolor:"#000",color:"#fff"},onClick:t,children:e.jsx(Ye,{})})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add a New Problem"}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Title"}),e.jsx("input",{name:"title",value:o.title,onChange:l,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:o.description,onChange:l,rows:4,className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Difficulty"}),e.jsxs("select",{name:"difficulty",value:o.difficulty,onChange:l,className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Hard",children:"Hard"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Function Signatures"}),f.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Language:"})," ",r.language," ",e.jsx("br",{}),e.jsx("strong",{children:"Signature:"})," ",e.jsx("pre",{className:"whitespace-pre-wrap",children:r.signature})]}),e.jsx("button",{type:"button",onClick:()=>a(i),className:"text-red-500 ml-4",children:"❌ Remove"})]},i)),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("select",{value:c,onChange:r=>p(r.target.value),className:"border p-2 rounded",children:[e.jsx("option",{value:"cpp",children:"C++"}),e.jsx("option",{value:"c",children:"C"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"python",children:"Python"})]}),e.jsx("div",{children:e.jsx(Ze,{height:"200px",language:c,theme:"vs-light",value:S,onChange:r=>k(r),options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,padding:"10px"}})})]}),e.jsx("button",{type:"button",onClick:j,className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Function Signature"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Test Cases"}),g.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex gap-2 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"Input",value:r.input,onChange:b=>y(i,"input",b.target.value),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:r.output,onChange:b=>y(i,"output",b.target.value),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("button",{type:"button",onClick:()=>v(i),className:"text-red-500 self-center",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(),className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Test Case"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Sample Test Cases"}),d.map((r,i)=>e.jsxs("div",{className:"mb-4 border p-3 rounded flex gap-2 flex-wrap",children:[e.jsx("input",{type:"text",placeholder:"Input",value:r.input,onChange:b=>y(i,"input",b.target.value,!0),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Output",value:r.output,onChange:b=>y(i,"output",b.target.value,!0),className:"flex-grow p-2 border rounded",required:!0}),e.jsx("input",{type:"text",placeholder:"Explanation",value:r.explanation,onChange:b=>y(i,"explanation",b.target.value,!0),className:"flex-grow p-2 border rounded"}),e.jsx("button",{type:"button",onClick:()=>v(i,!0),className:"text-red-500 self-center",children:"❌ Remove"})]},i)),e.jsx("button",{type:"button",onClick:()=>w(!0),className:"bg-green-100 border border-green-500 px-3 py-1 rounded text-sm",children:"➕ Add Sample Test Case"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 transition",children:"Add Problem"})]})]})})};function Ft({testId:t,sectionId:n}){const[o,s]=u.useState(!1),[d,m]=u.useState([]),[g,h]=u.useState(""),[f,x]=u.useState(!1),[c,p]=u.useState({open:!1,message:"",severity:"success"}),S=async()=>{x(!0);try{const l=await q.get(`${H}/api/v2/test/problems/get`,{withCredentials:!0});m(l.data)}catch(l){console.error(l),p({open:!0,message:"Failed to fetch problems",severity:"error"})}finally{x(!1)}},k=async()=>{var l,y;if(!g)return p({open:!0,message:"Please select a problem",severity:"warning"});try{const w=await q.post(`${H}/api/v2/test/section/${t}/${n}/add-problem`,{problemId:g},{withCredentials:!0});p({open:!0,message:w.data.message,severity:"success"})}catch(w){console.error(w),p({open:!0,message:((y=(l=w.response)==null?void 0:l.data)==null?void 0:y.message)||"Failed to add problem",severity:"error"})}};return u.useEffect(()=>{S()},[]),e.jsxs(e.Fragment,{children:[o&&e.jsx($t,{setSnackbar:p,closeModal:()=>{s(!1),S()}}),e.jsxs("section",{className:"flex justify-between items-center",children:[e.jsx(U,{onClick:()=>s(!0),variant:"contained",sx:{fontSize:11},startIcon:e.jsx(ae,{}),children:"Add New Problem"}),e.jsxs("div",{className:"flex gap-4 mt-5 items-center",children:[f?e.jsx(Ke,{size:24}):e.jsxs(Qe,{variant:"standard",value:g,onChange:l=>h(l.target.value),displayEmpty:!0,sx:{minWidth:250},children:[e.jsx(pe,{value:"",disabled:!0,children:"Select Problem"}),d.map(l=>e.jsx(pe,{value:l._id,children:l.title},l._id))]}),e.jsx(U,{onClick:k,variant:"contained",color:"primary",sx:{fontSize:9},disabled:!g,children:"Add to Section"})]})]}),e.jsx(we,{open:c.open,autoHideDuration:4e3,onClose:()=>p({...c,open:!1}),children:e.jsx(Ce,{onClose:()=>p({...c,open:!1}),severity:c.severity,variant:"filled",children:c.message})})]})}const Bt=$e.lazy(()=>Fe(()=>import("./AddSectionModal-C-MctgbY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));function ds(){var w,v,j;const{id:t}=Le(),[n,o]=u.useState(null),[s,d]=u.useState(),[m,g]=u.useState(!1),[h,f]=u.useState({name:"",duration:"",isAvailable:!1}),[x,c]=u.useState(!1),[p,S]=u.useState({open:!1,message:"",severity:"success"}),k=a=>{const{name:C,value:r,type:i,checked:b}=a.target,P=i==="checkbox"?b:r;f(N=>({...N,[C]:P}))},l=()=>{S(a=>({...a,open:!1}))},y=async a=>{var C,r;a.preventDefault(),c(!0);try{const i=await q.post(`${H}/api/v2/test/edit/${t}`,h,{withCredentials:!0});S({open:!0,message:"Test updated successfully!",severity:"success"})}catch(i){const b=((r=(C=i.response)==null?void 0:C.data)==null?void 0:r.message)||"Failed to update test.";S({open:!0,message:b,severity:"error"})}finally{c(!1)}};return u.useEffect(()=>{q.get(`${H}/api/v2/test/${t}`,{withCredentials:!0}).then(a=>{var C;o(a.data),d((C=a.data)==null?void 0:C.sections[0]),f({name:a.data.name||"",duration:parseInt(a.data.duration)||0,isAvailable:a.data.isAvailable||!1})}).catch(a=>console.log(a))},[t]),e.jsxs("div",{className:"b",children:[e.jsxs("main",{className:"flex gap-4",children:[e.jsxs("form",{onSubmit:y,className:"flex-1 border rounded-lg items-center py-3 grid grid-cols-1 space-y-3 shadow-lg font-sans  p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test id : "}),e.jsx("input",{className:"custominput",type:"text",value:n==null?void 0:n._id,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test name : "}),e.jsx("input",{className:"custominput",type:"text",name:"name",value:h==null?void 0:h.name,onChange:k})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test duration : "}),e.jsx("input",{className:"custominput",type:"text",name:"duration",onChange:k,value:h.duration})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Test decription : "}),e.jsx("input",{className:"custominput",type:"text",value:n==null?void 0:n.description,readOnly:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-nowrap",children:"Is Available "}),e.jsx("input",{className:"",type:"checkbox",name:"isAvailable",onChange:k,checked:h.isAvailable})]}),e.jsx(U,{type:"submit",sx:{fontSize:11,width:"100px"},variant:"contained",children:"Update"})]}),e.jsxs("section",{className:"flex-[0.7] justify-start border flex-col rounded-lg items-center py-3 flex gap-4 shadow-lg font-sans  p-4",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full p-2 bg-white shadow-md rounded-md",children:(w=n==null?void 0:n.sections)==null?void 0:w.map((a,C)=>e.jsx("div",{className:"w-full",children:e.jsx(U,{fullWidth:!0,onClick:()=>d(a),sx:{justifyContent:"flex-start",fontSize:12,textTransform:"none",backgroundColor:a._id===(s==null?void 0:s._id)?"#333":"#FFA500",color:a._id===(s==null?void 0:s._id)?"#fff":"#000","&:hover":{backgroundColor:a._id===(s==null?void 0:s._id)?"#111":"#e69500"},borderRadius:"8px",padding:"6px 12px"},variant:"contained",children:a.name})},a._id))}),e.jsx(je,{title:"Add section",children:e.jsx(re,{onClick:()=>{g(!0)},color:"primary",focusRipple:!0,children:e.jsx(ae,{})})})]})]}),e.jsxs("section",{className:"mt-4",children:[s&&(s==null?void 0:s.sectionType)=="Quiz"&&e.jsx(Lt,{setCurrSection:d,setCurrTest:o,setSnackbar:S,sectionId:s==null?void 0:s._id,testId:t}),s&&(s==null?void 0:s.sectionType)=="Coding"&&e.jsx(e.Fragment,{children:e.jsx(Ft,{testId:t,sectionId:s==null?void 0:s._id})})]}),t&&m&&e.jsx(u.Suspense,{fallback:e.jsx("div",{children:e.jsx("div",{className:"loader"})}),children:e.jsx(Bt,{closeModal:()=>{g(!1)},testId:t})}),e.jsxs("section",{className:"mt-4",children:[(v=s==null?void 0:s.questionSet)==null?void 0:v.map((a,C)=>e.jsxs(me,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:C+1+". "}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Question"}),e.jsx("input",{type:"text",className:"custominput",value:a.question,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Marks"}),e.jsx("input",{type:"number",className:"custominput ",value:a.negative,name:"",id:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold ml-1",children:"Negative"}),e.jsx("input",{type:"number",className:"custominput ",value:a.marks,name:"",id:""})]})]})}),e.jsx(xe,{children:a.answerOptions.map((r,i)=>e.jsxs("div",{className:"flex mb-1 gap-3 items-center",children:[e.jsxs("p",{className:"text-xs text-nowrap",children:["Option ",i+1]}),e.jsx("input",{style:{width:"300px"},type:"text",className:"custominput w-[100px]",value:r.text,name:"",id:""}),e.jsx("input",{type:"checkbox",checked:r.isCorrect,placeholder:"isCorrect",name:"",id:""})]}))})]})),(j=s==null?void 0:s.problemset)==null?void 0:j.map((a,C)=>e.jsxs(me,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-3 items-center w-full",children:[e.jsx("p",{className:"text-sm",children:C+1+". "}),e.jsx("p",{children:a.title})]})}),e.jsx(xe,{children:e.jsx(e.Fragment,{children:e.jsx("p",{children:a.description})})})]}))]}),e.jsx(we,{open:p.open,autoHideDuration:3e3,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(Ce,{onClose:l,severity:p.severity,sx:{width:"100%"},children:p.message})})]})}export{ds as default};
