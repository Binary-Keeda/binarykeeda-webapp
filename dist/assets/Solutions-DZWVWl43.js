import{j as e,b as K,c as U,r as a,e as G,a as T,B as _,i as J,L as X}from"./index-DfoLIEly.js";import{D as h}from"./Divider-CaRXfyVa.js";import{I as Z}from"./IconButton-Cmfj4T6-.js";import{c as j}from"./createSvgIcon-DZiSbIQ0.js";import{T as ee}from"./TextField-DJslImeR.js";import{B as u}from"./Button-DoH6hskA.js";import"./createSimplePaletteValueFilter-Buu2TBus.js";import"./dividerClasses-DYAduvT_.js";import"./CircularProgress-l7MGT7BE.js";import"./Portal-Buz8h6Ty.js";import"./Select-Cov1IFwh.js";import"./Menu-CAI6arpy.js";import"./index-yT0BVxAl.js";import"./Modal-n1uAGa0H.js";import"./index-et6kIqBB.js";const se=j(e.jsx("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp"),te=j(e.jsx("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen"),le=j(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help"),ie=({setOpen:o})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 backdrop-blur confirm-dialog ",children:e.jsxs("div",{className:"relative px-4 min-h-screen md:flex md:items-center md:justify-center",children:[e.jsx("div",{className:" opacity-25 w-full h-full absolute z-10 inset-0"}),e.jsxs("div",{className:"bg-white rounded-lg md:max-w-md md:mx-auto p-4 fixed inset-x-0 bottom-0 z-50 mb-4 mx-4 md:relative shadow-lg",children:[e.jsxs("div",{className:"md:flex items-center",children:[e.jsx("div",{className:"rounded-full border border-gray-300 flex items-center justify-center w-16 h-16 flex-shrink-0 mx-auto",children:e.jsx("i",{className:"bx bx-error text-3xl",children:"⚠"})}),e.jsxs("div",{className:"mt-4 md:mt-0 md:ml-6 text-center md:text-left",children:[e.jsx("p",{className:"font-bold",children:"Warning!"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Tab Swicthing or Window Minimizing is not allowed One more cheating attempt will automatically submit your quiz !"})]})]}),e.jsx("div",{className:"text-center md:text-right mt-4 md:flex md:justify-end",children:e.jsx("button",{onClick:()=>{o(!1)},id:"confirm-delete-btn",className:"block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-red-200 text-red-700 rounded-lg font-semibold text-sm md:ml-2 md:order-2",children:"Close"})})]})]})}),Ne=()=>{const o=K(),{user:d}=U(s=>s.auth),[r,v]=a.useState({}),[$,O]=a.useState({}),[f,P]=a.useState(null),[B,g]=a.useState(!1),[A,w]=a.useState(!1),[F,y]=a.useState(!1),[m,D]=a.useState(),[t,V]=a.useState(null),[n,p]=a.useState(1),x=1,{id:W}=G(),[N,re]=a.useState([window.innerHeight,window.innerWidth]),k=s=>{const{name:l,value:i}=s.target;v({...r,[l]:i})},q=s=>{const l=s;v(i=>{const c={...i};return delete c[l],c})},C=()=>{document.getElementById("root").requestFullscreen().then(()=>{})},R=async()=>{try{const s=await T.get(`${_}/api/v1/quiz/solution/${W}?userId=${d._id}`);s.data&&(V(s.data.quiz),D(s.data.solution))}catch(s){console.log(s.message),o("/user")}},z=()=>{document.hidden&&g(!0)},S=()=>{(window.innerHeight<N[0]||window.innerWidth<N[1])&&g(!0)},I=s=>{s.ctrlKey&&(s.key==="c"||s.key==="v")||s.metaKey&&(s.key==="c"||s.key==="v")?(s.preventDefault(),alert("Copy-paste is disabled!")):s.key=="f"&&C()},L=n*x,Q=L-x,b=(t==null?void 0:t.questions.slice(Q,L))||[],E=t?Math.ceil(t.questions.length/x):0,Y=()=>{n<E&&(O({...prev,[n]:!0}),p(n+1),document.getElementById(n).scrollIntoView({behavior:"smooth",block:"start"}))},M=()=>{n>1&&p(n-1),document.getElementById(n).scrollIntoView({behavior:"smooth",block:"end"})};a.useEffect(()=>(R(),document.addEventListener("visibilitychange",z),window.addEventListener("resize",S),document.addEventListener("keydown",I),()=>{document.removeEventListener("visibilitychange",z),window.removeEventListener("resize",S),document.removeEventListener("keydown",I)}),[]),a.useEffect(()=>{if(t&&m){const l=new Date(m.createdAt).getTime()+t.duration*60*1e3,i=setInterval(()=>{const c=l-Date.now();P(Math.max(c,0)),c<=0&&(clearInterval(i),H())},1e3);return()=>clearInterval(i)}},[t,m]);const H=async()=>{try{m.response=r,(await T.post(`${_}/api/v1/solution/user/submit`,{quizId:t._id,userId:d._id,response:r})).status===200&&w(!0)}catch(s){console.log(s)}};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"h-[70px] bg-white relative w-full",children:e.jsxs("nav",{className:"fixed items-center bg-white z-20 px-5 w-full flex justify-between h-[70px] shadow-lg",children:[e.jsx("div",{className:"flex",children:e.jsx("img",{src:`${J}`,className:"h-10 rounded-full",alt:""})}),e.jsx("div",{className:"flex gap-5",children:f>0?e.jsxs("div",{className:"flex gap-4 items-center px-3 p-1 bg-white text-gray-900 rounded-2xl shadow-md transition-all transform",children:[e.jsxs("div",{className:"flex items-center gap-2 text-md font-semibold",children:[e.jsx("span",{className:"text-lg animate-pulse",children:"⏳"}),Math.floor(f/6e4),"m"]}),e.jsx(h,{orientation:"vertical",flexItem:!0,className:"border-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2 text-md font-semibold",children:[e.jsx("span",{className:"text-lg animate-pulse",children:"⏱️"}),Math.floor(f%6e4/1e3),"s"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Times Up : Redirecting ..."}),e.jsxs("span",{className:"bg-black backdrop-blur-md z-50 fixed h-screen w-screen top-0 left-0 bg-opacity-5 flex flex-col justify-center items-center",children:[e.jsx("div",{class:"border-gray-300 h-10 w-10 animate-spin rounded-full border-2 border-t-blue-600"}),e.jsx("p",{className:"text-gray-900 text-sm mt-1",children:"Please wait while we are loading your quiz"})]})]})}),e.jsxs("div",{className:"md:flex hidden gap-3 items-center",children:[e.jsx(Z,{onClick:C,children:e.jsx(te,{})}),e.jsx(h,{flexItem:!0,orientation:"vertical"}),e.jsxs("span",{className:"text-[#757575]",children:[e.jsx(le,{color:"inherit"}),e.jsx("small",{children:"Help"})]}),e.jsx(h,{flexItem:!0,orientation:"vertical"}),e.jsxs(X,{to:"/user/practice",className:"text-[#757575]",children:[e.jsx(se,{color:"inherit"}),e.jsx("small",{children:" Exit"})]}),e.jsx(h,{flexItem:!0,orientation:"vertical"})]})]})}),e.jsxs("main",{className:"flex flex-col h-[calc(100vh-52px-70px)] lg:flex-row font-sans bg-white text-gray-800",children:[e.jsxs("div",{className:"flex-1 flex-col justify-between flex h-full p-5",children:[e.jsx("div",{className:"border w-full border-gray-200 rounded-sm p-8 shadow-sm",children:b==null?void 0:b.map((s,l)=>e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"mb-8 flex-1 px-2 rounded-lg",children:[e.jsxs("h1",{className:"text-lg font-semibold mb-6 text-gray-900",children:["Q",(n-1)*x+l+1,":"," ",s.question]}),s.image&&e.jsx("img",{src:s.image,alt:`Question ${l+1}`,className:"w-96 h-auto rounded-lg mb-4"})]}),e.jsxs("div",{className:"flex justify-start flex-[0.8]",children:[s.category==="MCQ"&&e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-lg font-semibold mb-6 mx-3 text-sky-900",children:"Choose the correct option"}),e.jsxs("div",{className:"flex w-full flex-col gap-3",children:[s.options.map(i=>e.jsxs("div",{className:`${r[s._id]!=i._id?"bg-white text-gray-900  ":"bg-sky-800 text-white"}   relative rounded-3xl cursor-pointer transition-all duration-200 hover:bg-sky-700 hover:text-white items-center px-5 w-full h-[50px] flex gap-1`,children:[e.jsx("input",{required:!0,type:"radio",name:`${s._id}`,value:`${i==null?void 0:i._id}`,className:"absolute w-full cursor-pointer h-full opacity-0 z-10",onChange:k}),e.jsx("span",{className:"absolute text-inherit z-9 w-full flex items-center py-2 h-[50px]",children:i.text})]},i._id)),e.jsx("button",{onClick:()=>{q(s._id)},children:"Clear selection"})]})]}),s.category==="Text"&&e.jsxs("div",{className:"w-full pr-16",children:[e.jsx("h1",{className:"text-lg font-semibold mb-6 text-sky-900",children:"Analyze the question & type your answer below"}),e.jsx(ee,{autoFocus:!0,value:r[`${s._id}`]!=null?r[`${s._id}`]:"",onChange:k,name:`${s._id}`,fullWidth:!0,variant:"standard",label:"Enter Answer"})]})]})]},l))}),e.jsxs("div",{className:"flex mb-4 justify-between  w-full",children:[e.jsxs("div",{className:"flex flex-col  items-start",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-md font-semibold",children:"Attempted"}),Object.keys(r).length]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-md font-semibold",children:"Total Questions"}),t==null?void 0:t.questions.length]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex h-4 w-4 bg-green-500"}),e.jsx("p",{children:"Attempted"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex h-4 w-4 bg-red-500"}),e.jsx("p",{children:"Not Attempted"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex h-4 w-4 bg-sky-700"}),e.jsx("p",{children:"Selected Option"})]})]}),e.jsx("div",{className:"flex justify-center items-center",children:n===E?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"contained",onClick:M,children:"Prev"}),e.jsx(u,{onClick:()=>{y(!0)},variant:"contained",children:"Submit"})]}):e.jsxs("div",{className:"flex  gap-2",children:[n!=1&&e.jsx(u,{variant:"contained",onClick:M,children:"Prev"}),e.jsx(u,{variant:"contained",onClick:Y,children:"Next"})]})})]})]}),e.jsx("div",{className:"w-full h-full lg:w-1/4 border-t lg:border-t-0 lg:border-l border-gray-200 p-6 bg-white flex flex-col justify-between",children:e.jsx("div",{className:"w-full h-full flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-semibold mb-4",children:"Question Navigator"}),e.jsx("div",{className:"grid grid-cols-6 gap-2 lg:grid-cols-5",children:t==null?void 0:t.questions.map((s,l)=>e.jsx("div",{onClick:()=>{p(l+1)},style:{height:"40px",width:"40px"},className:`cursor-pointer ${$[s.id]?r[s._id]?"bg-[#7ccb40] text-white border-2 font-semibold shadow-sm":l+1===n?"bg-sky-700 text-white border-2":"bg-[#c54325] text-white border-2":"bg-[#fff] border"} flex items-center p-3 relative z-50 justify-center h-10 w-10 rounded-full`,children:e.jsx("span",{id:l+1,children:l+1})},l))})]})})}),B&&e.jsx(ie,{setOpen:g}),F&&e.jsx(ne,{submitHandler:H,setSubmit:y}),e.jsx(ae,{navigate:o,isOpen:A,setIsOpen:w})]})]})},ne=({submitHandler:o,setSubmit:d})=>e.jsx("div",{id:"YOUR_ID",className:"fixed z-50 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[e.jsx("div",{className:"hidden sm:block absolute top-0 right-0 pt-4 pr-4",children:e.jsxs("button",{type:"button",onClick:()=>{d(!1)},"data-behavior":"cancel",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})]})}),e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:"Are you sure you want to submit quiz ?"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:"You will not be allowed to change your resposne once submitted"})})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{onClick:o,type:"button","data-behavior":"commit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Submit"}),e.jsx("button",{onClick:()=>{d(!1)},type:"button","data-behavior":"cancel",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),ae=({navigate:o,isOpen:d,onClose:r})=>d?e.jsx("div",{className:"fixed z-50 backdrop-blur-sm inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Quiz Submitted Successfully!"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm leading-5 text-gray-500",children:"Your quiz has been successfully submitted. You can check your score in the results section."})})]})]}),e.jsx("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:e.jsx("button",{onClick:()=>{o("/user")},className:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:w-auto",children:"OK"})})]})]})}):null;export{Ne as default};
