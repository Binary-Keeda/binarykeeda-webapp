import{s as T,a as $,B as z,l as q,c as D,r as j,j as r,L as E}from"./index-b2tHD9Pr.js";import{A as V}from"./Assessment-y0G-Wc08.js";import{B as I}from"./Button-CmAR0m5y.js";import{L as w}from"./LinearLabel-BGbmSV9L.js";import{P as G}from"./PieChart-BDsfDRdS.js";import{B as k}from"./Box-DVW9hoM4.js";import{A as X}from"./Avatar-BReN4Ssy.js";import"./createSvgIcon-D7_Pyzpt.js";import"./DefaultPropsProvider-CDurVPpn.js";import"./extends-CF3RwP-h.js";import"./createSimplePaletteValueFilter-COr2uZoU.js";import"./CircularProgress-BY1vwNiq.js";import"./ButtonBase-DAu797o-.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./useForkRef-B5zYVBaY.js";import"./useEnhancedEffect-SpzInZsn.js";import"./index-BQtWvcMJ.js";import"./index-Chjiymov.js";import"./LinearProgress-BmjzN1Ge.js";import"./index-Bgy1YpqD.js";import"./useThemeProps-Cg2W_4Vs.js";import"./useTheme-KZ81bX-h.js";import"./Portal-DAxSttRd.js";import"./index-DI8dVHa-.js";import"./Typography-3jmitFJ3.js";import"./index-P7-J1HVV.js";import"./Popper-Ff7lL0Kr.js";import"./useSlotProps-_aKpJzk8.js";import"./useSlot-BwXLCkxQ.js";const Y=async()=>{const{user:e}=T.getState().auth;try{const t=await $.get(`${z}/api/v1/solution/get/solutions?userId=${e._id}`);T.dispatch(q(t.data))}catch(t){console.log(t)}finally{}},Z=()=>{const{solutions:e}=D(t=>t.solution);return j.useEffect(()=>{Y()},[]),r.jsx("section",{className:" bg-white mt-9 shadow-lg rounded-lg gap-6   flex flex-col ",children:r.jsxs("div",{className:"relative flex flex-col  w-full h-full custom-scrollbar overflow-scroll    bg-white shadow-md  bg-clip-border",children:[r.jsxs("table",{className:"w-full text-left table-auto min-w-max",children:[r.jsx("thead",{className:"bg-support rounded-t-lg",children:r.jsxs("tr",{children:[r.jsx("td",{className:"p-4 border-b border-slate-200 ",children:r.jsx("p",{className:"text-sm font-normal leading-none ",children:"Quiz Name"})}),r.jsx("td",{className:"p-4 border-b border-slate-200 ",children:r.jsx("p",{className:"text-sm font-normal leading-none ",children:"Submitted At"})}),r.jsx("td",{className:"p-4 border-b border-slate-200 ",children:r.jsx("p",{className:"text-sm font-normal leading-none ",children:"Preview"})})]})}),r.jsx("tbody",{children:e==null?void 0:e.map(t=>r.jsxs("tr",{className:"hover bg-primary border-b border-slate-200",children:[r.jsx("td",{className:"p-4 py-5",children:r.jsx("p",{className:"block font-semibold text-sm  dark:text-white text-slate-800",children:t.quizId.title})}),r.jsx("td",{className:"p-4 py-5",children:r.jsx("p",{className:"block font-semibold text-sm  dark:text-white text-slate-800",children:J(t.updatedAt)})}),r.jsx("td",{className:"p-4 py-5",children:r.jsx(E,{to:`/user/preview/${t._id}`,className:"block font-semibold text-sm  dark:text-white text-slate-800",children:r.jsx(V,{})})})]},t._id))})]}),((e==null?void 0:e.length)==0||e==null)&&r.jsx("div",{className:"py-5",children:r.jsx(E,{to:"/user/practice",className:"text-sm text-gray-600 p-5 my-5",children:"Go to practice section"})})]})})};function J(e){const t=new Date(e),a=t.getDate(),n=t.toLocaleString("default",{month:"short"}).toUpperCase(),s=t.getFullYear(),l=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${a} ${n} ${s}, ${l}:${i}`}const y=e=>e===1?"/icons/medal-first.png":e===2?"/icons/medal-second.png":e===3?"/icons/medal-third.png":null,A={university:[{rank:1,name:"Aryan Bhandari",score:980,university:"UPES"},{rank:2,name:"Pranjal Rawat",score:950,university:"UPES"},{rank:3,name:"Tanvi Sharma",score:920,university:"UPES"}],global:[{rank:1,name:"Ritika Panwar",score:1e3,university:"DU"},{rank:2,name:"Aditya Mehra",score:985,university:"IIT Delhi"},{rank:3,name:"Aryan Bhandari",score:980,university:"UPES"}]},C={name:"Aryan Bhandari",university:"UPES"},Q="UPES";function K({}){const[e,t]=j.useState("university"),a=(A==null?void 0:A[e])||[],n=a.find(s=>s.name===C.name);return n!=null&&n.rank,r.jsx("div",{className:"flex-[.7] bg-primary dark:bg-support rounded-md shadow-lg p-4 flex flex-col min-h-[400px]",children:r.jsxs("div",{className:"rounded-lg flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 rounded-md bg-support dark:bg-primary   shadow-sm",children:[r.jsx("div",{className:"text-sm font-medium opacity-80",children:"Institution"}),r.jsx("div",{className:"text-sm font-semibold",children:Q})]}),r.jsxs("div",{className:"flex h-[50px] rounded-lg text-white gap-3 bg-support dark:bg-primary items-center px-4",children:[r.jsx(I,{variant:e==="university"?"contained":"text",onClick:()=>t("university"),sx:{fontSize:12,borderRadius:20,textTransform:"none",color:e==="university"?"#fff":"#ccc"},children:"University"}),r.jsx(I,{variant:e==="global"?"contained":"text",onClick:()=>t("global"),sx:{fontSize:12,borderRadius:20,textTransform:"none",color:e==="global"?"#fff":"#ccc"},children:"Global"})]}),r.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[a.map((s,l)=>r.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-support dark:bg-primary  rounded-md",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[y(s.rank)&&r.jsx("img",{className:"h-7",src:y(s.rank),alt:`rank-${s.rank}`}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:s.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:s.university})]})]}),r.jsxs("span",{className:"text-sm font-bold text-[#1976d2] dark:text-blue-300",children:[s.score," pts"]})]},l)),n&&r.jsxs("div",{className:"p-4 bg-support dark:bg-primary rounded-md mt-4 shadow",children:[r.jsx("h1",{className:"text-md font-bold text-gray-800 dark:text-white mb-2",children:"Your Rank"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex gap-3 items-center",children:[y(n.rank)&&r.jsx("img",{className:"h-7",src:y(n.rank),alt:""}),"#",n.rank,r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:C.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:C.university})]})]}),r.jsxs("small",{className:"text-[#1976d2] text-md font-bold  dark:text-blue-300",children:[n.score," pts"]})]})]})]})]})})}const ee={margin:{right:5,top:-4},slotProps:{legend:{hidden:!0}}};function te({solutions:e}){var l,i,o,d,f,c;const t=((l=e==null?void 0:e.Aptitude)==null?void 0:l.attempted)||0,a=((i=e==null?void 0:e.Core)==null?void 0:i.attempted)||0,n=((o=e==null?void 0:e.Miscellaneous)==null?void 0:o.attempted)||0,s=t===0&&a===0&&n===0;return r.jsx("div",{className:"flex relative flex-col items-center justify-center flex-[0.5]  p-6 rounded-md shadow-lg bg-primary dark:bg-support bg-opacity-60 backdrop-blur-lg",children:s?r.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 font-semibold",children:"Not enough data to display progress"}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col items-center w-full  rounded-xl ",children:[r.jsx("div",{className:"flex gap-2 justify-evenly w-full mb-3",children:[{label:"Aptitude",color:"#6366f1",value:t},{label:"Core",color:"#14b8a6",value:a},{label:"Miscellaneous",color:"#f97316",value:n}].map(m=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:m.color}}),r.jsxs("span",{className:"text-gray-700 dark:text-gray-200 font-medium",children:[m.label,": ",m.value]})]},m.label))}),r.jsx(G,{width:300,height:240,...ee,series:[{data:[{value:t,color:"#6366f1",label:"Aptitude"},{value:a,color:"#14b8a6",label:"Core"},{value:n,color:"#f97316",label:"Miscellaneous"}],innerRadius:24,outerRadius:100,paddingAngle:0,cornerRadius:5,startAngle:-45,endAngle:360,cx:150,cy:110,highlightScope:{faded:"global",highlighted:"item"},faded:{additionalRadius:-5,color:"gray"},arcLabelMinAngle:15}]})]}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("h1",{children:"Average Marks"}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{className:"text-xs font-medium text-gray-800 dark:text-gray-300",children:"Apti"}),r.jsx(k,{width:"100%",children:r.jsx(w,{value:(d=e==null?void 0:e.Aptitude)==null?void 0:d.average})})]}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-800 dark:text-gray-300",children:"Core"}),r.jsx(k,{width:"100%",children:r.jsx(w,{value:(f=e==null?void 0:e.Core)==null?void 0:f.average})})]}),r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsx("label",{className:"text-xs font-semibold text-gray-800 dark:text-gray-300",children:"Misc"}),r.jsx(k,{width:"100%",children:r.jsx(w,{value:(c=e==null?void 0:e.Miscellaneous)==null?void 0:c.average})})]})]})]})})}/*! Fast Average Color | Â© 2025 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function re(e){var t=e.toString(16);return t.length===1?"0"+t:t}function R(e){return"#"+e.map(re).join("")}function ae(e){var t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128}function ne(e){return e?se(e)?e:[e]:[]}function se(e){return Array.isArray(e[0])}function S(e,t,a){for(var n=0;n<a.length;n++)if(ie(e,t,a[n]))return!0;return!1}function ie(e,t,a){switch(a.length){case 3:if(le(e,t,a))return!0;break;case 4:if(oe(e,t,a))return!0;break;case 5:if(de(e,t,a))return!0;break;default:return!1}}function le(e,t,a){return e[t+3]!==255||e[t]===a[0]&&e[t+1]===a[1]&&e[t+2]===a[2]}function oe(e,t,a){return e[t+3]&&a[3]?e[t]===a[0]&&e[t+1]===a[1]&&e[t+2]===a[2]&&e[t+3]===a[3]:e[t+3]===a[3]}function N(e,t,a){return e>=t-a&&e<=t+a}function de(e,t,a){var n=a[0],s=a[1],l=a[2],i=a[3],o=a[4],d=e[t+3],f=N(d,i,o);return i?!!(!d&&f||N(e[t],n,o)&&N(e[t+1],s,o)&&N(e[t+2],l,o)&&f):f}var ce=24;function fe(e,t,a){for(var n={},s=a.dominantDivider||ce,l=a.ignoredColor,i=a.step,o=[0,0,0,0,0],d=0;d<t;d+=i){var f=e[d],c=e[d+1],m=e[d+2],u=e[d+3];if(!(l&&S(e,d,l))){var h=Math.round(f/s)+","+Math.round(c/s)+","+Math.round(m/s);n[h]?n[h]=[n[h][0]+f*u,n[h][1]+c*u,n[h][2]+m*u,n[h][3]+u,n[h][4]+1]:n[h]=[f*u,c*u,m*u,u,1],o[4]<n[h][4]&&(o=n[h])}}var g=o[0],F=o[1],U=o[2],v=o[3],_=o[4];return v?[Math.round(g/v),Math.round(F/v),Math.round(U/v),Math.round(v/_)]:a.defaultColor}function me(e,t,a){for(var n=0,s=0,l=0,i=0,o=0,d=a.ignoredColor,f=a.step,c=0;c<t;c+=f){var m=e[c+3],u=e[c]*m,h=e[c+1]*m,g=e[c+2]*m;d&&S(e,c,d)||(n+=u,s+=h,l+=g,i+=m,o++)}return i?[Math.round(n/i),Math.round(s/i),Math.round(l/i),Math.round(i/o)]:a.defaultColor}function he(e,t,a){for(var n=0,s=0,l=0,i=0,o=0,d=a.ignoredColor,f=a.step,c=0;c<t;c+=f){var m=e[c],u=e[c+1],h=e[c+2],g=e[c+3];d&&S(e,c,d)||(n+=m*m*g,s+=u*u*g,l+=h*h*g,i+=g,o++)}return i?[Math.round(Math.sqrt(n/i)),Math.round(Math.sqrt(s/i)),Math.round(Math.sqrt(l/i)),Math.round(i/o)]:a.defaultColor}function L(e){return b(e,"defaultColor",[0,0,0,0])}function b(e,t,a){return e[t]===void 0?a:e[t]}var H=10,M=100;function ue(e){return e.search(/\.svg(\?|$)/i)!==-1}function xe(e){if(W(e)){var t=e.naturalWidth,a=e.naturalHeight;return!e.naturalWidth&&ue(e.src)&&(t=a=M),{width:t,height:a}}return ve(e)?{width:e.videoWidth,height:e.videoHeight}:B(e)?{width:e.codedWidth,height:e.codedHeight}:{width:e.width,height:e.height}}function P(e){return pe(e)?"canvas":ge(e)?"offscreencanvas":B(e)?"videoframe":be(e)?"imagebitmap":e.src}function W(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement}var O=typeof OffscreenCanvas<"u";function ge(e){return O&&e instanceof OffscreenCanvas}function ve(e){return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement}function B(e){return typeof VideoFrame<"u"&&e instanceof VideoFrame}function pe(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement}function be(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function je(e,t){var a=b(t,"left",0),n=b(t,"top",0),s=b(t,"width",e.width),l=b(t,"height",e.height),i=s,o=l;if(t.mode==="precision")return{srcLeft:a,srcTop:n,srcWidth:s,srcHeight:l,destWidth:i,destHeight:o};var d;return s>l?(d=s/l,i=M,o=Math.round(i/d)):(d=l/s,o=M,i=Math.round(o/d)),(i>s||o>l||i<H||o<H)&&(i=s,o=l),{srcLeft:a,srcTop:n,srcWidth:s,srcHeight:l,destWidth:i,destHeight:o}}var ye=typeof window>"u";function Ne(){return ye?O?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var we="FastAverageColor: ";function x(e){return Error(we+e)}function p(e,t){t||console.error(e)}var ke=function(){function e(){this.canvas=null,this.ctx=null}return e.prototype.getColorAsync=function(t,a){if(!t)return Promise.reject(x("call .getColorAsync() without resource"));if(typeof t=="string"){if(typeof Image>"u")return Promise.reject(x("resource as string is not supported in this environment"));var n=new Image;return n.crossOrigin=a&&a.crossOrigin||"",n.src=t,this.bindImageEvents(n,a)}else{if(W(t)&&!t.complete)return this.bindImageEvents(t,a);var s=this.getColor(t,a);return s.error?Promise.reject(s.error):Promise.resolve(s)}},e.prototype.getColor=function(t,a){a=a||{};var n=L(a);if(!t){var s=x("call .getColor() without resource");return p(s,a.silent),this.prepareResult(n,s)}var l=xe(t),i=je(l,a);if(!i.srcWidth||!i.srcHeight||!i.destWidth||!i.destHeight){var s=x('incorrect sizes for resource "'.concat(P(t),'"'));return p(s,a.silent),this.prepareResult(n,s)}if(!this.canvas&&(this.canvas=Ne(),!this.canvas)){var s=x("OffscreenCanvas is not supported in this browser");return p(s,a.silent),this.prepareResult(n,s)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var s=x("Canvas Context 2D is not supported in this browser");return p(s,a.silent),this.prepareResult(n)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=i.destWidth,this.canvas.height=i.destHeight;try{this.ctx.clearRect(0,0,i.destWidth,i.destHeight),this.ctx.drawImage(t,i.srcLeft,i.srcTop,i.srcWidth,i.srcHeight,0,0,i.destWidth,i.destHeight);var o=this.ctx.getImageData(0,0,i.destWidth,i.destHeight).data;return this.prepareResult(this.getColorFromArray4(o,a))}catch(d){var s=x("security error (CORS) for resource ".concat(P(t),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return p(s,a.silent),a.silent||console.error(d),this.prepareResult(n,s)}},e.prototype.getColorFromArray4=function(t,a){a=a||{};var n=4,s=t.length,l=L(a);if(s<n)return l;var i=s-s%n,o=(a.step||1)*n,d;switch(a.algorithm||"sqrt"){case"simple":d=me;break;case"sqrt":d=he;break;case"dominant":d=fe;break;default:throw x("".concat(a.algorithm," is unknown algorithm"))}return d(t,i,{defaultColor:l,ignoredColor:ne(a.ignoredColor),step:o,dominantDivider:a.dominantDivider})},e.prototype.prepareResult=function(t,a){var n=t.slice(0,3),s=[t[0],t[1],t[2],t[3]/255],l=ae(t);return{value:[t[0],t[1],t[2],t[3]],rgb:"rgb("+n.join(",")+")",rgba:"rgba("+s.join(",")+")",hex:R(n),hexa:R(t),isDark:l,isLight:!l,error:a}},e.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},e.prototype.bindImageEvents=function(t,a){var n=this;return new Promise(function(s,l){var i=function(){f();var c=n.getColor(t,a);c.error?l(c.error):s(c)},o=function(){f(),l(x('Error loading image "'.concat(t.src,'"')))},d=function(){f(),l(x('Image "'.concat(t.src,'" loading aborted')))},f=function(){t.removeEventListener("load",i),t.removeEventListener("error",o),t.removeEventListener("abort",d)};t.addEventListener("load",i),t.addEventListener("error",o),t.addEventListener("abort",d)})},e}();function Ae({user:e}){const t=j.useRef(null),[a,n]=j.useState("#fff6e9");return j.useEffect(()=>{if(!(e!=null&&e.avatar))return;const s=new ke,l=t.current,i=()=>{s.getColorAsync(l).then(o=>n(o.hex)).catch(o=>{console.error("Color extraction failed:",o),n("#fff6e9")})};return l!=null&&l.complete?i():l.onload=i,()=>{s.destroy()}},[e]),r.jsxs("div",{className:"relative flex flex-[.5] bg-primary dark:bg-support shadow-md p-6 rounded-md  flex-col items-center",children:[r.jsx("img",{ref:t,src:e==null?void 0:e.avatar,alt:"avatar",crossOrigin:"anonymous",style:{display:"none"}}),r.jsxs("div",{className:"h-full items-end w-full",children:[r.jsx("div",{className:"relative h-[93px] flex justify-center items-end w-full rounded-md bg-[#fff6e9]",children:r.jsx(X,{sx:{position:"absolute",bottom:"-30px"},src:`${e.avatar}`,className:"mb-4 border",style:{width:"80px",height:"80px"}})}),r.jsxs("div",{className:"text-center mt-[20px]",children:[r.jsx("p",{className:"text-xl font-bold",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.email})]}),r.jsxs("div",{className:"mt-7 flex flex-col gap-1 items-start w-full text-sm",children:[r.jsxs("small",{children:[r.jsx("strong",{children:"Semester:"})," ",e.semester||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Program:"})," ",e.program||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"University:"})," ",e.university||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Specialisation:"})," ",e.specialisation||"Not Provided"]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Joined:"})," ",new Date(e.createdAt).toDateString()]}),r.jsxs("small",{children:[r.jsx("strong",{children:"Status:"})," Active"]})]})]}),r.jsx(E,{to:`profile/${e._id}`,children:r.jsx(I,{variant:"contained",color:"primary",sx:{fontSize:9},children:"Edit Profile"})})]})}function tt(){const{user:e,rankData:t}=D(a=>a.auth);return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"gap-6 dark:text-gray-50 text-gray-700 flex flex-col lg:flex-row ",children:[r.jsx(Ae,{user:e}),r.jsx(te,{solutions:e.solutions}),r.jsx(K,{user:e,userUniversity:e.university})]}),r.jsx(Z,{})]})}export{tt as default};
