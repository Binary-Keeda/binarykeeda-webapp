const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CodeOutput-BvJzR9o3.js","assets/index-ByscKdnN.js","assets/index-DPVRx9am.css","assets/IconButton-DUhFuVRf.js","assets/CircularProgress-CGXYK_QQ.js","assets/Close-TIsiLFFR.js","assets/createSvgIcon-CV4kloV_.js"])))=>i.map(i=>d[i]);
import{j as e,r as x,a as I,B as R,c as Y,e as K,C as B,n as P,q as Z,_ as ee,y as se,L as U}from"./index-ByscKdnN.js";import{B as A}from"./Button-DSPqBU7M.js";import{M as te}from"./Modal-0XQZg_ib.js";import{B as ae}from"./Box-DE83vwkw.js";import{T as q}from"./Typography-BNJ9LGKq.js";import{d as ne}from"./index-g0kGOWjn.js";import{I as ie}from"./IconButton-DUhFuVRf.js";import{C as re}from"./Close-TIsiLFFR.js";import{c as V}from"./createSvgIcon-CV4kloV_.js";import{N as le,L as oe}from"./NavigateNext-BYXcbpB0.js";import{C as ce}from"./CircularProgress-CGXYK_QQ.js";import{D as de}from"./Divider-C7HmWmPf.js";import{S as me}from"./ShortText-CgLymucN.js";import"./Portal-DvzNmnWg.js";import"./index-I-2B8CDE.js";import"./dividerClasses-DVqtj1cb.js";const H=V(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),xe=V(e.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore");function ue({questionSet:n=[],sectionId:i,testSubmissionId:j}){var m;const[t,h]=x.useState(0),[d,u]=x.useState({}),[N,_]=x.useState(!1),[y,w]=x.useState(!1),o=n[t],C=(s,r)=>{u(c=>({...c,[s]:r}))},b=s=>{var f;const r=((f=n[t])==null?void 0:f._id)===s,c=d[s];return`px-3 py-1 border text-sm rounded-sm ${r?"bg-blue-700 text-white border-blue-700":c?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-100 border-gray-300 text-gray-700"}`},g=()=>{_(!0),I.post(`${R}/api/v2/test/submit-section/${j}`,{sectionId:i,sectionType:"Quiz",quizAnswers:d},{withCredentials:!0}).then(()=>{w(!1),window.location.reload()}).catch(s=>{console.log(s),_(!1)})};return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-52px-70px)] lg:flex-row font-sans bg-white text-gray-800",children:[e.jsxs("div",{className:"flex-1 flex-col justify-between flex h-full p-5",children:[e.jsxs("div",{className:"border w-full border-gray-200 rounded-sm p-8 shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Question ",t+1," of ",n.length]}),e.jsx("p",{className:"text-base",children:o==null?void 0:o.question})]}),e.jsx("div",{className:"space-y-4",children:(m=o==null?void 0:o.answerOptions)==null?void 0:m.map(s=>{const r=d[o._id]===s._id;return e.jsxs("label",{className:`flex items-center border p-3 rounded-md cursor-pointer transition ${r?"border-blue-600 bg-blue-50":"border-gray-300"}`,children:[e.jsx("input",{type:"radio",className:"mr-3",name:`question-${o._id}`,value:s._id,checked:r,onChange:()=>C(o._id,s._id)}),e.jsx("span",{className:"text-sm",children:s.text})]},s._id)})})]}),e.jsxs("div",{className:"mt-8 justify-end flex items-center gap-4",children:[e.jsx("button",{onClick:()=>h(s=>Math.max(s-1,0)),disabled:t===0,className:"px-4 py-2 border rounded-md text-sm bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>h(s=>Math.min(s+1,n.length-1)),disabled:t===n.length-1,className:"px-4 py-2 border rounded-md text-sm bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:"Next"})]})]}),e.jsx("div",{className:"w-full h-full lg:w-1/4 border-t lg:border-t-0 lg:border-l border-gray-200 p-6 bg-white flex flex-col justify-between",children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-semibold mb-4",children:"Question Navigator"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 lg:grid-cols-3",children:n.map((s,r)=>e.jsx("button",{onClick:()=>h(r),className:b(s._id),children:r+1},s._id))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Quiz Instructions"}),e.jsxs("ul",{className:"text-sm text-gray-700 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Select the correct option for each question."}),e.jsx("li",{children:"You can navigate through questions using the buttons."}),e.jsx("li",{children:`Click "Submit" when you're ready. You can't change answers afterward.`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Color Legend"}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4 h-4 rounded-sm bg-blue-700 inline-block"}),e.jsx("span",{children:"Current Question"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4 h-4 rounded-sm bg-blue-100 border border-blue-300 inline-block"}),e.jsx("span",{children:"Answered"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4 h-4 rounded-sm bg-gray-100 border border-gray-300 inline-block"}),e.jsx("span",{children:"Unanswered"})]})]})]})]}),e.jsx(A,{onClick:()=>w(!0),variant:"contained",color:"primary",fullWidth:!0,disabled:N,children:"Submit"})]})}),e.jsx(te,{open:y,onClose:()=>w(!1),"aria-labelledby":"submit-confirm-title","aria-describedby":"submit-confirm-description",children:e.jsxs(ae,{className:"absolute bg-white p-6 rounded-md shadow-lg",sx:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:300},children:[e.jsx(q,{id:"submit-confirm-title",variant:"h6",component:"h2",className:"mb-4",children:"Confirm Submission"}),e.jsx(q,{id:"submit-confirm-description",className:"mb-4 text-sm text-gray-700",children:"Are you sure you want to submit your quiz? You won't be able to change your answers later."}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(A,{onClick:()=>w(!1),variant:"outlined",children:"Cancel"}),e.jsx(A,{onClick:g,variant:"contained",color:"primary",children:"Confirm"})]})]})})]})}const he=({setShowSubmitWindow:n,setCurrProblem:i,setSubmittedProblems:j,problemName:t,code:h,currProblem:d,testCases:u,language:N,fetchResult:_,problemId:y,getLanguageId:w})=>{const[o,C]=x.useState(null),[b,g]=x.useState(!1),[m,s]=x.useState(!1),[r,c]=x.useState([]),{user:f}=Y(a=>a.auth),{id:k}=K(),E=async()=>{var D;s(!0);const a=[];let p=0,T=0,v=0;for(const S of u)try{const X=(await I.post(`${B}/submissions?base64_encoded=false`,{source_code:h,language_id:w(N),stdin:S.input,cpu_time_limit:5,memory_limit:128e3},{headers:P})).data.token,L=await _(X),W=((D=L==null?void 0:L.stdout)==null?void 0:D.trim())||"",G=S.output.trim(),Q=W===G;Q&&p++,T+=parseFloat(L.time||0),v+=parseInt(L.memory||0),a.push({input:S.input,output:W,expected:G,passed:Q,error:L.stderr||null})}catch(O){console.error("Test case error:",O),a.push({input:S.input,output:"",expected:S.output,passed:!1,error:"Execution failed"})}const z=T/u.length,$=v/u.length;try{const S=await I.post(`${R}/api/v3/review/submit`,{userId:f._id,testId:k,problemId:d._id,language:N,sourceCode:h,codeReview:o,passedTestCases:p,totalTestCases:u.length,executionTime:z,memoryUsed:$,problemId:y});j(O=>[...O,{pNo:d,id:S.data.submissionId}]),setCurrP}catch(S){console.error("Submission API error:",S)}c(a),s(!1)},M=()=>{g(!0),I.post(`${R}/api/v3/review/code`,{sourceCode:h,problem:t}).then(a=>{const p=F(a.data.data);console.log(p),C(p)}).catch(a=>console.error(a)).finally(()=>g(!1))};function F(a){if(!a)return null;const p=a.replace(/```json\n?/,"").replace(/```$/,"");try{return JSON.parse(p)}catch(T){return console.error("Failed to parse cleaned JSON:",T),null}}x.useEffect(()=>{o?E():M()},[o]);const l=(a,p,T=6)=>{const v=p>=1;return e.jsxs("div",{className:`flex justify-between items-center px-4 py-2 rounded text-sm font-medium ${v?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.jsx("span",{children:a}),e.jsxs("span",{children:[p," ",v?"Passed":"Failed"]})]})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 overflow-auto",children:e.jsxs("div",{className:"bg-white relative text-black p-6 rounded-xl shadow-2xl w-[90%] max-w-3xl max-h-[90vh] overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Code Submission Report"}),e.jsx(ie,{onClick:()=>n(!1),size:"small",children:e.jsx(re,{})})]}),b||m?e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{className:"loader3"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Test Case Results"}),r.map((a,p)=>e.jsxs("div",{className:`border-l-4 p-4 rounded shadow-sm ${a.passed?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Input:"})," ",e.jsx("pre",{className:"inline",children:a.input})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expected:"})," ",e.jsx("pre",{className:"inline",children:a.expected})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Your Output:"})," ",e.jsx("pre",{className:"inline",children:a.output})]}),e.jsxs("p",{className:"mt-1 text-sm font-semibold",children:["Result: ",a.passed?e.jsx("span",{className:"text-green-700",children:"✅ Passed"}):e.jsx("span",{className:"text-red-700",children:"❌ Failed"})]}),a.error&&e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Error: ",a.error]})]},p))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Gemini Code Review"}),o?e.jsxs("div",{className:"space-y-2",children:[l("Indentation",o.indentation),l("Modularity",o.modularity),l("Variable Naming",o.variable_name_convention),l("Time Complexity",o.time_complexity),l("Space Complexity",o.space_complexity),l("Final",o.finalScore)]}):e.jsx("div",{className:"text-gray-500 text-sm",children:"Code review not available."})]})]})]})})};function pe(n){return n.replace(/\\n/g,`
`)}const J=n=>({cpp:54,c:50,java:62,python:71})[n]||71;function ge({setCurrProblem:n,currProblem:i,submittedProblems:j,problem:t,currSetting:h,setCurrentSection:d,setSubmittedProblems:u,handleCodeChange:N,handleLanguageChange:_}){Z.lazy(()=>ee(()=>import("./CodeOutput-BvJzR9o3.js"),__vite__mapDeps([0,1,2,3,4,5,6])));const[y,w]=x.useState(h[i].language),[o,C]=x.useState(h[i].code),[b,g]=x.useState(!1),[m,s]=x.useState([]),[r,c]=x.useState();x.useEffect(()=>(j.includes(i)?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[i,j]),x.useEffect(()=>{const l=h[i];w(l.language),C(l.code),s([])},[i,h]);const f=l=>{C(l),N(i,l)},k=l=>{const a=l.target.value;window.confirm("Changing the language might reset your code. Proceed?")&&(w(a),_(i,a))},E=async l=>{var a;for(let p=0;p<10;p++)try{const v=(await I.get(`${B}/submissions/${l}?base64_encoded=false`,{headers:P})).data;if([3,4,6,11].includes((a=v.status)==null?void 0:a.id))return v;await new Promise(z=>setTimeout(z,2e3))}catch{return{stderr:"Failed to fetch result."}}return{stderr:"Timed out."}},M=async()=>{g(!0);const l=[];for(const a of t.sampleTestCases)try{const T=(await I.post(`${B}/submissions?base64_encoded=false`,{source_code:o,language_id:J(y),stdin:a.input,cpu_time_limit:5,memory_limit:128e3},{headers:P})).data.token,v=await E(T),z=v!=null&&v.stdout?v.stdout.trim():"",$=a.output.trim();l.push({input:a.input,output:z,expected:$,passed:z===$,error:v.stderr||null})}catch(p){console.error("Test case error:",p),l.push({input:a.input,output:"",expected:a.output,passed:!1,error:"Execution failed"})}s(l),g(!1)},F=()=>{t.id,c(!1),window.confirm("Are you sure you want to submit the code?")&&(window.scrollTo({top:0,behavior:"smooth"}),c(!0))};return t?e.jsx(e.Fragment,{children:e.jsxs("section",{className:"p-5  h-[calc(100vh-60px-52px)]  overflow-x-hidden overflow-y-hidden left-0  relative flex w-[calc(100vw-70px)]",children:[e.jsxs("div",{className:"flex-[0.6] relative min-w-[200px] custom-scrollbar overflow-y-hidden",children:[e.jsxs("div",{className:"flex-[0.4] overflow-y-scroll h-full p-4 space-y-4 text-sm",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.title}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Description"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.description})]}),t.constraints&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Constraints"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600",children:t.constraints.map((l,a)=>e.jsx("li",{children:l},a))})]}),t.topics&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Topics"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.topics.map((l,a)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:l},a))})]}),t.hints&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Hints"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600",children:t.hints.map((l,a)=>e.jsx("li",{children:l},a))})]}),t.sampleTestCases&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Sample Test Cases"}),t.sampleTestCases.map((l,a)=>e.jsxs("div",{className:"mb-2 p-2 bg-gray-100 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Input:"})," ",l.input]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Output:"})," ",l.output]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Explanation:"})," ",l.explanation]})]},a))]})]}),e.jsx("div",{className:`absolute w-full h-[] top-0 transition-all duration-300 ease-linear  ${r?"top-0":"top-[100vh] invisible "}`,children:r&&e.jsx(he,{setCurrProblem:n,problemName:t.title,problemId:t._id,setShowSubmitWindow:c,code:o,language:y,testCases:t.testCases,getLanguageId:J,fetchResult:E,currProblem:i,setSubmittedProblems:u})})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("hr",{className:"bg-gray-300  flex-1 w-[2px]"}),e.jsxs("div",{className:"hover:bg-blue-500 hover:text-white cursor-grab bg-gray-300 h-[25px] w-[25px] flex items-center  rounded-full",children:[e.jsx(xe,{sx:{marginRight:"-3px"},fontSize:"12"}),e.jsx(le,{sx:{marginLeft:"-3px"},fontSize:"12"})]}),e.jsx("hr",{className:"bg-gray-300 flex-1 w-[2px]"})]}),e.jsxs("div",{className:"mb-10 relative flex-1",children:[j.some(l=>l.pNo===i)&&e.jsx("div",{className:"absolute h-full w-full inset-0  bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-white text-black p-6 rounded shadow-lg text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Submission Notice"}),e.jsx("p",{children:"You have already submitted this problem."})]})}),e.jsxs("div",{className:"bg-gray-50 flex justify-between p-5 mx-5 rounded-t-lg",children:[e.jsxs("div",{className:"flex flex-col  ml-1",children:[e.jsx("label",{className:"text-xs mb-1",children:"Choose language"}),e.jsxs("select",{value:y,onChange:k,className:"custominput",children:[e.jsx("option",{value:"cpp",children:"C++"}),e.jsx("option",{value:"c",children:"C"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"python",children:"Python"})]})]}),e.jsxs("div",{className:"flex justify-end flex-1 items-center gap-2",children:[e.jsx("button",{onClick:M,className:"rounded-md border border-slate-300 py-2 px-4 text-sm transition-all shadow-sm hover:shadow-lg text-white bg-slate-800 disabled:opacity-50",type:"button",disabled:b,children:b?"Running...":"Run Code"}),e.jsx("button",{onClick:F,className:"rounded-md border border-slate-300 py-2 px-4 text-sm transition-all shadow-sm hover:shadow-lg text-white bg-slate-800",type:"button",children:"Submit"})]})]}),e.jsxs("div",{className:"bg-gray-50 shadow-lg border mx-5 custom-scrollbar",children:[e.jsx(ne,{height:"550px",language:y,value:o,onChange:f,options:{theme:"light",minimap:{enabled:!1},fontSize:14}}),(b||m.length>0)&&e.jsx(fe,{isExecuting:b,testResults:m,data:t==null?void 0:t.sampleTestCases})]})]})]})}):e.jsx("p",{className:"p-5 text-red-500",children:"Problem not found"})}const fe=({isExecuting:n,code:i,data:j,testResults:t})=>e.jsx("div",{className:"grid mt-5 grid-cols-4 gap-3 mx-5 w-full",children:j==null?void 0:j.map((h,d)=>{const u=t[d];return e.jsx("div",{className:"mb-6 border rounded p-4 bg-gray-50",children:n?e.jsxs("div",{className:"flex justify-center",children:[" ",e.jsx("div",{className:"loader3"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2 flex justify- items-center",children:[e.jsxs("strong",{children:["Test Case #",d+1]}),u&&e.jsx("span",{className:`font-semibold ${u.passed?"text-green-600":"text-red-600"}`,children:u.passed?"✅ Passed":"❌ Failed"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Input:"}),e.jsx("pre",{className:"bg-white p-2 border rounded whitespace-pre-wrap",children:pe(h.input)})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Expected Output:"}),e.jsx("pre",{className:"bg-white p-2 border rounded whitespace-pre-wrap",children:h.output})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Your Output:"}),e.jsx("pre",{className:"bg-white p-2 border rounded whitespace-pre-wrap",children:u.output||"No output"})]}),u.error&&e.jsxs("div",{className:"text-red-500",children:[e.jsx("strong",{children:"Error:"})," ",u.error]})]})]})},d)})});function be({test:n,currSection:i,testSubmission:j}){const[t,h]=x.useState(0),[d,u]=x.useState([]),{user:N}=Y(m=>m.auth),[_,y]=x.useState(),[w,o]=x.useState(()=>n.sections[i].problemset.map((m,s)=>{var r;return{id:s,language:"cpp",code:((r=m.functionSignature.find(c=>c.language==="cpp"))==null?void 0:r.signature)||""}}));x.useEffect(()=>{(async()=>{try{const r=(await Promise.all(n==null?void 0:n.sections[i].problemset.map(c=>I.get(`${R}/api/v2/test/get/problem/response`,{params:{userId:N._id,problemId:c._id,testId:n._id},withCredentials:!0})))).map((c,f)=>c.data.exists?{pNo:f,id:c.data.id}:null).filter(c=>c!==null);u(r)}catch(s){console.error("Error fetching submissions:",s)}})()},[i,n._id,N._id,n==null?void 0:n.sections]),x.useEffect(()=>{o(m=>n.sections[i].problemset.map((s,r)=>{var c;return m[r]||{id:r,language:"cpp",code:((c=s.functionSignature.find(f=>f.language==="cpp"))==null?void 0:c.signature)||""}}))},[i,n.sections]);const C=(m,s)=>{o(r=>{const c=[...r];return c[m]={...c[m],code:s},c})},b=(m,s)=>{o(r=>{const c=[...r],f=c[m],k=n.sections[i].problemset[m].functionSignature.find(E=>E.language===s);return c[m]={...f,language:s,code:(k==null?void 0:k.signature)||""},c})},g=async()=>{try{y(!0),await I.post(`${R}/api/v2/test/submit-section/${j._id}`,{sectionId:n.sections[i]._id,sectionType:n.sections[i].sectionType,codingAnswers:d},{withCredentials:!0}),window.location.reload()}catch(m){console.error("Submit error:",m)}finally{y(!1)}};return x.useEffect(()=>{d.length==n.sections[i].problemset.length&&g()},[d]),e.jsxs(e.Fragment,{children:[d.length===n.sections[i].problemset.length&&e.jsx("div",{className:"fixed top-[67px]  flex w-full justify-end pr-24",children:e.jsx(A,{disabled:_,onClick:g,variant:"contained",sx:{bgcolor:"#000"},children:_?e.jsx(ce,{size:14}):"Submit"})}),e.jsx("div",{className:"fixed right-0 top-[70px] h-[calc(100vh-70px)] px-5 py-4 bg-gray-50 shadow-sm rounded-md mb-4",children:e.jsxs("div",{className:"relative flex flex-col items-center gap-6",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-gray-400 z-0"}),n.sections[i].problemset.map((m,s)=>{const r=d.some(f=>(f==null?void 0:f.pNo)===s),c=s===t;return e.jsx("span",{onClick:()=>{r||h(s)},disabled:r,className:`relative border-gray-300 border-2 z-10 flex justify-center items-center h-[35px] w-[35px] rounded-full text-sm font-medium transition duration-200
            ${r?"bg-blue-500 text-white border-green-600 cursor-not-allowed":c?"bg-blue-500  text-white cursor-pointer shadow-md":"bg-gray-100 text-gray-800 cursor-pointer hover:bg-gray-200 border-gray-300"}
          `,title:r?"Already submitted":"Click to open",children:r?e.jsx(H,{fontSize:"small",className:"text-blue-400"}):s+1},s)})]})}),t<n.sections[i].problemset.length&&e.jsx(ge,{setCurrProblem:h,currProblem:t,submittedProblems:d,problem:n.sections[i].problemset[t],currSetting:w,setSubmittedProblems:u,setCurrentSection:o,handleCodeChange:C,handleLanguageChange:b})]})}function Ae({userId:n,testSubmission:i,testId:j,currSection:t,setCurrentSection:h,test:d}){var C;const[u,N]=x.useState(0),{user:_}=Y(b=>b.auth),[y,w]=x.useState(!1);x.useEffect(()=>{if(d&&i){const g=new Date(i.startedAt).getTime()+d.duration*60*1e3,m=setInterval(()=>{const s=g-Date.now();N(Math.max(s,0)),s<=0&&(clearInterval(m),o())},1e3);return()=>clearInterval(m)}},[i,d]);const o=()=>{console.log("Time's up! Submitting test...")};return i.isSubmitted?e.jsx(e.Fragment,{children:e.jsx(je,{testSubmission:i})}):e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"flex gap-8 relative h-[60px] items-center left-0 shadow-sm w-full p-4",children:e.jsxs("nav",{className:"flex gap-8 fixed h-[60px] z-20 justify-between bg-white left-0 top-0 items-center shadow-sm w-full p-4",children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx("img",{src:se,className:"h-9",alt:"Logo"})}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("p",{children:"Time left"}),u>0?e.jsxs("div",{className:"flex gap-4 items-center px-3 p-1 bg-gray-300 text-gray-900 rounded-sm shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-md ",children:[e.jsx("span",{className:"text-lg animate-pulse"}),Math.floor(u/6e4)," m"]}),e.jsx(de,{orientation:"vertical",flexItem:!0,className:"border-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2 text-md ",children:[e.jsx("span",{className:"text-lg animate-pulse",children:" "}),Math.floor(u%6e4/1e3)," s"]})]}):e.jsx("span",{className:"text-red-500 font-bold",children:"Loading...."}),e.jsx("div",{className:"cursor-pointer",children:e.jsx(me,{})})]})]})}),e.jsx("div",{className:"flex px-3 py-2 shadow-sm bg-gray-50 items-center gap-2",children:d==null?void 0:d.sections.map((b,g)=>{const m=g===t,s=g<t,r=g>t;return e.jsxs("div",{className:`w-[140px] py-2 px-3 rounded-lg shadow-sm text-sm flex justify-between items-center cursor-pointer transition duration-300
    ${m?"bg-blue-600 text-white":"bg-white hover:bg-blue-50 text-blue-800"}
  `,children:[e.jsx("span",{className:"mr-2 font-medium truncate",children:b.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[s&&e.jsx(H,{fontSize:"small",className:"text-blue-400"}),r&&e.jsx(oe,{fontSize:"small",className:"text-blue-200"})]})]},g)})}),d.sections[t].sectionType=="Quiz"?e.jsx(ue,{testSubmissionId:i._id,sectionId:d.sections[t]._id,questionSet:(C=d.sections[t])==null?void 0:C.questionSet}):e.jsx(be,{testSubmission:i,currSection:t,test:d})]})}function je({testSubmission:n}){return n!=null&&n.isSubmitted?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-8 max-w-xl w-full text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-green-700 mb-4",children:"Test Submitted Successfully"}),e.jsxs("p",{className:"text-gray-700 text-base mb-6",children:["Your test response has been successfully recorded. ",e.jsx("br",{}),"You may review your answers in the ",e.jsx("span",{className:"font-medium text-blue-600",children:"Preview"})," section."]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(U,{to:"/",children:e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-md text-sm transition-all",children:"Return to Home"})}),e.jsx(U,{to:"/user",children:e.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-5 py-2 rounded-md text-sm transition-all",children:"View Response"})})]})]})}):null}export{Ae as default};
