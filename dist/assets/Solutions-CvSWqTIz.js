import{j as e,b as R,c as U,r as a,e as Q,a as A,B as _,L as Y}from"./index-ByscKdnN.js";import{D as x}from"./Divider-C7HmWmPf.js";import{I as K}from"./IconButton-DUhFuVRf.js";import{c as u}from"./createSvgIcon-CV4kloV_.js";import{T as G}from"./TextField-BS-r-ETL.js";import{B as h}from"./Button-DSPqBU7M.js";import{A as J}from"./ArrowDropDown-DYgSbRLm.js";import"./CircularProgress-CGXYK_QQ.js";import"./dividerClasses-DVqtj1cb.js";import"./Portal-DvzNmnWg.js";import"./Menu-DCcQImx2.js";import"./index-DrY_JyAe.js";import"./Modal-0XQZg_ib.js";import"./index-I-2B8CDE.js";const X=u(e.jsx("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp"),Z=u(e.jsx("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"ExitToApp"),ee=u(e.jsx("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen"),se=u(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help"),te=({setOpen:o})=>e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 backdrop-blur confirm-dialog ",children:e.jsxs("div",{className:"relative px-4 min-h-screen md:flex md:items-center md:justify-center",children:[e.jsx("div",{className:" opacity-25 w-full h-full absolute z-10 inset-0"}),e.jsxs("div",{className:"bg-white rounded-lg md:max-w-md md:mx-auto p-4 fixed inset-x-0 bottom-0 z-50 mb-4 mx-4 md:relative shadow-lg",children:[e.jsxs("div",{className:"md:flex items-center",children:[e.jsx("div",{className:"rounded-full border border-gray-300 flex items-center justify-center w-16 h-16 flex-shrink-0 mx-auto",children:e.jsx("i",{className:"bx bx-error text-3xl",children:"⚠"})}),e.jsxs("div",{className:"mt-4 md:mt-0 md:ml-6 text-center md:text-left",children:[e.jsx("p",{className:"font-bold",children:"Warning!"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Tab Swicthing or Window Minimizing is not allowed One more cheating attempt will automatically submit your quiz !"})]})]}),e.jsx("div",{className:"text-center md:text-right mt-4 md:flex md:justify-end",children:e.jsx("button",{onClick:()=>{o(!1)},id:"confirm-delete-btn",className:"block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-red-200 text-red-700 rounded-lg font-semibold text-sm md:ml-2 md:order-2",children:"Close"})})]})]})}),ve=()=>{const o=R(),{user:d}=U(s=>s.auth),[r,B]=a.useState({}),[f,D]=a.useState(null),[H,p]=a.useState(!1),[T,b]=a.useState(!1),[P,v]=a.useState(!1),[c,$]=a.useState(),[t,F]=a.useState(null),[i,g]=a.useState(1),m=1,{id:O}=Q(),[w,ne]=a.useState([window.innerHeight,window.innerWidth]),y=s=>{const{name:l,value:n}=s.target;B({...r,[l]:n})},N=()=>{document.getElementById("root").requestFullscreen().then(()=>{})},V=async()=>{try{const s=await A.get(`${_}/api/v1/quiz/solution/${O}?userId=${d._id}`);s.data&&(F(s.data.quiz),$(s.data.solution))}catch(s){console.log(s.message),o("/user")}},k=()=>{document.hidden&&p(!0)},C=()=>{(window.innerHeight<w[0]||window.innerWidth<w[1])&&p(!0)},z=s=>{s.ctrlKey&&(s.key==="c"||s.key==="v")||s.metaKey&&(s.key==="c"||s.key==="v")?(s.preventDefault(),alert("Copy-paste is disabled!")):s.key=="f"&&N()},S=i*m,W=S-m,j=(t==null?void 0:t.questions.slice(W,S))||[],E=t?Math.ceil(t.questions.length/m):0,q=()=>{i<E&&(g(i+1),document.getElementById(i).scrollIntoView({behavior:"smooth",block:"start"}))},I=()=>{i>1&&g(i-1),document.getElementById(i).scrollIntoView({behavior:"smooth",block:"end"})};a.useEffect(()=>(V(),document.addEventListener("visibilitychange",k),window.addEventListener("resize",C),document.addEventListener("keydown",z),()=>{document.removeEventListener("visibilitychange",k),window.removeEventListener("resize",C),document.removeEventListener("keydown",z)}),[]),a.useEffect(()=>{if(t&&c){const l=new Date(c.createdAt).getTime()+t.duration*60*1e3,n=setInterval(()=>{const M=l-Date.now();D(Math.max(M,0)),M<=0&&(clearInterval(n),L())},1e3);return()=>clearInterval(n)}},[t,c]);const L=async()=>{try{c.response=r,(await A.post(`${_}/api/v1/solution/user/submit`,{quizId:t._id,userId:d._id,response:r})).status===200&&b(!0)}catch(s){console.log(s)}};return e.jsxs("main",{className:"font-[Lato] bg-gray-100 h-screen w-screen overflow-x-hidden overflow-y-scroll",children:[e.jsx("header",{className:"h-[70px] bg-white relative w-full",children:e.jsxs("nav",{className:"fixed items-center bg-white z-20 px-5 w-full flex justify-between h-[70px] shadow-lg",children:[e.jsx("div",{className:"flex",children:e.jsx("img",{src:"/assets/logo/A37A874D-8E55-4BCC-BDF4-EBFA65B2F790_1_201_a.jpeg",className:"h-10 rounded-full",alt:""})}),e.jsx("div",{className:"flex gap-5",children:f>0?e.jsxs("div",{className:"flex gap-4 items-center px-3 p-1 bg-white text-gray-900 rounded-2xl shadow-md transition-all transform",children:[e.jsxs("div",{className:"flex items-center gap-2 text-md font-semibold",children:[e.jsx("span",{className:"text-lg animate-pulse",children:"⏳"}),Math.floor(f/6e4),"m"]}),e.jsx(x,{orientation:"vertical",flexItem:!0,className:"border-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2 text-md font-semibold",children:[e.jsx("span",{className:"text-lg animate-pulse",children:"⏱️"}),Math.floor(f%6e4/1e3),"s"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Times Up : Redirecting ..."}),e.jsxs("span",{className:"bg-black backdrop-blur-md z-50 fixed h-screen w-screen top-0 left-0 bg-opacity-5 flex flex-col justify-center items-center",children:[e.jsx("div",{class:"border-gray-300 h-10 w-10 animate-spin rounded-full border-2 border-t-blue-600"}),e.jsx("p",{className:"text-gray-900 text-sm mt-1",children:"Please wait while we are loading your quiz"})]})]})}),e.jsxs("div",{className:"md:flex hidden gap-3 items-center",children:[e.jsx(K,{onClick:N,children:e.jsx(ee,{})}),e.jsx(x,{flexItem:!0,orientation:"vertical"}),e.jsxs("span",{className:"text-[#757575]",children:[e.jsx(se,{color:"inherit"}),e.jsx("small",{children:"Help"})]}),e.jsx(x,{flexItem:!0,orientation:"vertical"}),e.jsxs(Y,{to:"/user/practice",className:"text-[#757575]",children:[e.jsx(Z,{color:"inherit"}),e.jsx("small",{children:" Exit"})]}),e.jsx(x,{flexItem:!0,orientation:"vertical"})]})]})}),e.jsxs("div",{className:"flex md:mr-4 flex-col justify-between h-[calc(100vh-70px)] pl-5 md:pr-28 pr-5 pt-10",children:[j==null?void 0:j.map((s,l)=>e.jsxs("div",{className:"flex md:flex-row flex-col justify-between gap-5",children:[e.jsxs("div",{className:"mb-8 flex-1 px-2 rounded-lg",children:[e.jsxs("h1",{className:"text-lg font-semibold mb-6 text-gray-900",children:["Q",(i-1)*m+l+1,":"," ",s.question]}),s.image&&e.jsx("img",{src:s.image,alt:`Question ${l+1}`,className:"w-96 h-auto rounded-lg mb-4"})]}),e.jsxs("div",{className:"flex justify-start flex-[0.8]",children:[s.category==="MCQ"&&e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-lg font-semibold mb-6 mx-3 text-sky-900",children:"Choose the correct option"}),e.jsx("div",{className:"flex w-full flex-col gap-3",children:s.options.map(n=>e.jsxs("div",{className:`${r[s._id]!=n._id?"bg-white text-gray-900  ":"bg-sky-800 text-white"}   relative rounded-3xl cursor-pointer transition-all duration-200 hover:bg-sky-700 hover:text-white items-center px-5 w-full h-[50px] flex gap-1`,children:[e.jsx("input",{required:!0,type:"radio",name:`${s._id}`,value:`${n==null?void 0:n._id}`,className:"absolute w-full cursor-pointer h-full opacity-0 z-10",onChange:y}),e.jsx("span",{className:"absolute text-inherit z-9 w-full flex items-center py-2 h-[50px]",children:n.text})]},n._id))})]}),s.category==="Text"&&e.jsxs("div",{className:"w-full pr-16",children:[e.jsx("h1",{className:"text-lg font-semibold mb-6 text-sky-900",children:"Analyze the question & type your answer below"}),e.jsx(G,{autoFocus:!0,value:r[`${s._id}`]!=null?r[`${s._id}`]:"",onChange:y,name:`${s._id}`,fullWidth:!0,variant:"standard",label:"Enter Answer"})]})]})]},l)),e.jsxs("div",{className:"flex mb-4 justify-between  w-full",children:[e.jsxs("div",{className:"flex flex-col  items-start",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-md font-semibold",children:"Attempted"}),Object.keys(r).length]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-md font-semibold",children:"Total Questions"}),t==null?void 0:t.questions.length]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex h-4 w-4 bg-green-500"}),e.jsx("p",{children:"Attempted"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex h-4 w-4 bg-red-500"}),e.jsx("p",{children:"Not Attempted"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex h-4 w-4 bg-sky-700"}),e.jsx("p",{children:"Selected Option"})]})]}),e.jsx("div",{className:"flex justify-center items-center",children:i===E?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"contained",onClick:I,children:"Prev"}),e.jsx(h,{onClick:()=>{v(!0)},variant:"contained",children:"Submit"})]}):e.jsxs("div",{className:"flex  gap-2",children:[i!=1&&e.jsx(h,{variant:"contained",onClick:I,children:"Prev"}),e.jsx(h,{variant:"contained",onClick:q,children:"Next"})]})})]})]}),e.jsx("div",{className:"relative custom-scrollbar md:block hidden",children:e.jsxs("div",{className:"fixed right-3 overflow-x-hidden  custom-scrollbar overflow-y-auto rounded-sm bg-[#f1f1f1] top-[80px] shadow-xl w-24 gap-5 flex flex-col items-center max-h-[calc(100vh-100px)]",children:[e.jsx(X,{}),t==null?void 0:t.questions.map((s,l)=>e.jsx("div",{onClick:()=>{g(l+1)},style:{height:"40px",width:"40px"},className:`cursor-pointer ${r[s._id]?"bg-green-600 text-white  border-2 font-semibold shadow-sm":l+1==i?"bg-sky-700 text-white border-2":"bg-red-500 text-white border-2"} flex items-center p-3 relative z-50 justify-center h-10 w-10 rounded-full`,children:e.jsx("span",{id:l+1,children:l+1})},l)),e.jsx(J,{})]})}),H&&e.jsx(te,{setOpen:p}),P&&e.jsx(le,{submitHandler:L,setSubmit:v}),e.jsx(ie,{navigate:o,isOpen:T,setIsOpen:b})]})},le=({submitHandler:o,setSubmit:d})=>e.jsx("div",{id:"YOUR_ID",className:"fixed z-50 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[e.jsx("div",{className:"hidden sm:block absolute top-0 right-0 pt-4 pr-4",children:e.jsxs("button",{type:"button",onClick:()=>{d(!1)},"data-behavior":"cancel",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})]})}),e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:"Are you sure you want to submit quiz ?"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:"You will not be allowed to change your resposne once submitted"})})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{onClick:o,type:"button","data-behavior":"commit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Submit"}),e.jsx("button",{onClick:()=>{d(!1)},type:"button","data-behavior":"cancel",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),ie=({navigate:o,isOpen:d,onClose:r})=>d?e.jsx("div",{className:"fixed z-50 backdrop-blur-sm inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Quiz Submitted Successfully!"}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm leading-5 text-gray-500",children:"Your quiz has been successfully submitted. You can check your score in the results section."})})]})]}),e.jsx("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:e.jsx("button",{onClick:()=>{o("/user")},className:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:w-auto",children:"OK"})})]})]})}):null;export{ve as default};
